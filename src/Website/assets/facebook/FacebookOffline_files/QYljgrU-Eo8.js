/*1373195671,178138161*/

if (self.CavalryLogger) { CavalryLogger.start_js(["jsIYP"]); }

__d("AdsCurrency",["AdsCurrencyConfig"],function(a,b,c,d,e,f){var g=b('AdsCurrencyConfig').currencies;function h(m){if(g[m])return g[m][0];return null;}function i(m){if(g[m])return g[m][1];return null;}function j(m){if(g[m])return 1*g[m][2];return 1;}var k=[];for(var l in g)if(g.hasOwnProperty(l))k.push(l);f.getFormat=h;f.getSymbol=i;f.getOffset=j;f.currencyMapKeys=k;});
__d("ads-lib-formatters",["AdsCurrency"],function(a,b,c,d,e,f){var g=b('AdsCurrency'),h='USD';function i(t,u,v){t=t||'';v=v||'';u=typeof u==='undefined'?t.length:u;return t.length>u?(t.substr(0,u-v.length)+v):t;}function j(t,u){if(u===undefined||u===null)u='';return function(v){return !v?u:i(v,t,'...');};}function k(t,u,v,w){if(t==='N/A')return t;t=t||0;v=v||'';w=w||'.';t=u!==null?l(t,u):t+'';var x=t.split('.'),y=x[0],z=x[1],aa='',ba=/(\d)(\d\d\d)($|\D)/,ca='$1'+v+'$2$3';while((aa=y.replace(ba,ca))!=y)y=aa;var da=y;if(z)da+=w+z;return da;}function l(t,u){var v=Math.pow(10,u);t=Math.round(t*v)/v+'';if(!u)return t;var w=t.indexOf('.'),x=0;if(w==-1){t+='.';x=u;}else x=u-(t.length-w-1);for(var y=0,z=x;y<z;y++)t+='0';return t;}function m(t){return function(u){return k(u,t||0,',','.');};}function n(t,u){var v=u===false?1:100;return function(w){return k(w*v,t||0,',','.')+'%';};}var o={};function p(t,u,v){if(t===undefined)t=2;if(v===undefined)v=false;u=u||h;var w=u+'-'+t+'-'+v;if(!o[w]){var x=g.getFormat(u)||g.getFormat(h),y=g.getSymbol(u)||g.getSymbol(h),z=g.getOffset(u)||g.getOffset(h);x=x.replace('{symbol}',y);o[w]=function(aa){if(v)aa=aa/z;if(!(aa+'').match(/^\-?[\d\.,]*$/))return 'N/A';var ba=k(aa,t,',','.');return x.replace('{amount}',ba);};}return o[w];}function q(t){t=(t+'').trim().replace(/^[^\d]*\-/,'\u0002');if(!((/^\u0002?(\d+,\d*){2,}$/.test(t))||(/^\u0002?(\d+\.\d*){2,}$/.test(t))))t=t.replace(/[\.,](\d*\D*)$/,'\u0001$1');t=t.replace(/[^0-9\u0001\u0002]/g,'').replace('\u0001','.').replace('\u0002','-');return +t||0;}function r(){return function(t){return k(t,0,',','.')+'%';};}function s(t){var u=t.currency(),v=t.offset()==100?2:0;return p(v,u);}f.createTextTruncator=j;f.chopString=i;f.parseNumber=q;f.formatNumber=k;f.createNumberFormatter=m;f.createPercentFormatter=n;f.createMoneyFormatter=p;f.createMoneyFormatterForAccount=s;f.createInflationFormatter=r;});
__d("ComposerXDatepickerIconReset",["CSS","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('cx');function i(j){g.removeClass(j.element,"_4_na");g.removeClass(j.element,"_509o");}e.exports=i;});
__d("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
__d("ScrollingPager",["Arbiter","copyProperties","CSS","OnVisible","UIPagelet","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS'),j=b('OnVisible'),k=b('UIPagelet'),l=b('$'),m=b('ge'),n={};function o(p,q,r,s){this.scroll_loader_id=p;this.pagelet_src=q;this.data=r;this.options=s||{};if(this.options.target_id){this.target_id=this.options.target_id;this.options.append=true;}else this.target_id=p;this.scroll_area_id=this.options.scroll_area_id;this.handler=null;}h(o,{REGISTERED:'ScrollingPager/registered',getInstance:function(p){return n[p];}});h(o.prototype,{setBuffer:function(p){this.options.buffer=p;this.onvisible&&this.onvisible.setBuffer(p);},getBuffer:function(){return this.options.buffer;},register:function(){this.onvisible=new j(l(this.scroll_loader_id),this.getHandler(),false,this.options.buffer,false,m(this.scroll_area_id));n[this.scroll_loader_id]=this;g.inform(o.REGISTERED,{id:this.scroll_loader_id});},getInstance:function(p){return n[p];},getHandler:function(){if(this.handler)return this.handler;function p(q){var r=m(this.scroll_loader_id);if(!r){this.onvisible.remove();return;}i.addClass(r.firstChild,'async_saving');var s=this.options.handler;this.options.handler=function(){g.inform('ScrollingPager/loadingComplete');s&&s.apply(null,arguments);};if(q)this.data.pager_fired_on_init=true;k.loadFromEndpoint(this.pagelet_src,this.target_id,this.data,this.options);}return p.bind(this);},setHandler:function(p){this.handler=p;},removeOnVisible:function(){this.onvisible.remove();},checkBuffer:function(){this.onvisible&&this.onvisible.checkBuffer();}});e.exports=o;});
__d("StickyController",["Event","CSS","Style","Vector","copyProperties","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('Style'),j=b('Vector'),k=b('copyProperties'),l=b('queryThenMutateDOM');function m(n,o,p,q){this._element=n;this._marginTop=o;this._onchange=p;this._proxy=q||n.parentNode;this._boundQueryOnScroll=this._queryOnScroll.bind(this);this._boundMutateOnScroll=this._mutateOnScroll.bind(this);}k(m.prototype,{handleScroll:function(){l(this._boundQueryOnScroll,this._boundMutateOnScroll);},_queryOnScroll:function(){this._shouldFix=j.getElementPosition(this._proxy,'viewport').y<=this._marginTop;},_mutateOnScroll:function(){var n=this._shouldFix;if(this.isFixed()!==n){i.set(this._element,'top',n?this._marginTop+'px':'');h.conditionClass(this._element,'fixed_elem',n);this._onchange&&this._onchange(n);}},start:function(){if(this._event)return;this._event=g.listen(window,'scroll',this.handleScroll.bind(this));this.handleScroll.bind(this).defer();},stop:function(){this._event&&this._event.remove();this._event=null;},isFixed:function(){return h.hasClass(this._element,'fixed_elem');}});e.exports=m;});
__d("tidyEvent",["Run"],function(a,b,c,d,e,f){var g=b('Run'),h=[];function i(){while(h.length){var k=h.shift();if(k.remove){k._handler&&k.remove();}else k&&k.unsubscribe();}}function j(k){if(!h.length)g.onLeave(i);if(Array.isArray(k)){h=h.concat(k);}else h.push(k);return k;}e.exports=j;});
__d("TriggerablePageletLoader",["function-extensions","CSS","Event","OnVisible","Run","UIPagelet","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('CSS'),h=b('Event'),i=b('OnVisible'),j=b('Run'),k=b('UIPagelet'),l=b('copyProperties'),m=[];function n(p){if(!m[p])return;m[p].__trigger&&m[p].__trigger.remove();delete m[p];}function o(p,q){this._disabledTriggerKeys=[];this._pageletConfig=p;this._loaded=false;this._loading=false;this._triggerKeys=[];if(q)q.forEach(this.addTrigger.bind(this));j.onLeave(this.destroy.bind(this));}l(o,{removeTrigger:function(p){for(var q in m)if(m[q]&&m[q].node===p)n(q);},TRIGGER_CLICK:'click',TRIGGER_ONVISIBLE:'onvisible',TRIGGER_NOW:'now'});l(o.prototype,{addTrigger:function(p){p.__trigger=this._createTrigger(p);m.push(p);this._triggerKeys.push(m.length-1);},destroy:function(){this.removeTriggers();if(this._pageletRequest){this._pageletRequest.cancel();this._pageletRequest=null;this._loading=false;this._loaded=false;}},disableTriggers:function(){this._triggerKeys.forEach(function(p){if(m[p]){m[p].__trigger.remove();this._disabledTriggerKeys.push(p);}}.bind(this));},enableTriggers:function(){if(this._loaded||this._loading)return;this._disabledTriggerKeys.forEach(function(p){if(m[p])m[p].__trigger=this._createTrigger(m[p]);}.bind(this));this._disabledTriggerKeys.length=0;},_createTrigger:function(p){if(this._loaded||this._loading)return;var q=this.onTrigger.bind(this,p);switch(p.type){case o.TRIGGER_CLICK:return h.listen(p.node,'click',function(r){r.prevent();q();});case o.TRIGGER_ONVISIBLE:return new i(p.node,q,p.onVisibleStrict,p.onVisibleBuffer);case o.TRIGGER_NOW:return q();default:}},load:function(p){if(this._loaded||this._loading)return;this._loading=true;this._loaded=false;g.addClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.addClass(p.node,'async_saving');var q=this._pageletConfig.options||{};q.displayCallback=this.onLoad.bind(this,p);if(q.crossPage===undefined)q.crossPage=true;this._pageletRequest=k.loadFromEndpoint(this._pageletConfig.controller,this._pageletConfig.node,this._pageletConfig.data,q);},onLoad:function(p,q){this._loaded=true;this._pageletRequest=null;g.removeClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.removeClass(p.node,'async_saving');if(this._pageletConfig.displayCallback){this._pageletConfig.displayCallback(q);}else q();},onTrigger:function(p){p.callback&&p.callback(p);if(!this._loaded&&!this._loading)this.load(p);},removeTriggers:function(p){this._triggerKeys.forEach(function(q){if(m[q]&&(!p||m[q].type===p))n(q);});}});e.exports=o;});
__d("MedleyPageletRequestData",["Arbiter","TidyArbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('TidyArbiter'),i={},j={get:function(){return i;},set:function(k){i=k;h.inform('Medley/requestDataSet',null,g.BEHAVIOR_STATE);}};e.exports=j;});
__d("TimelineSection",["Arbiter","DOMScroll","DoublyLinkedListMap","Run","TidyArbiterMixin","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DOMScroll'),i=b('DoublyLinkedListMap'),j=b('Run'),k=b('TidyArbiterMixin'),l=b('copyProperties'),m=b('ge'),n=null;function o(){n=null;}function p(q,r,s){this.id=q;this.label=s;this.nodeID=r;this._parentSection=null;this.childSections=new i();this._isLoaded=false;p.inform.bind(p,'sectionInitialized/'+q,{section:this},g.BEHAVIOR_STATE).defer();}l(p,k,{callWithSection:function(q,r){this.subscribe('sectionInitialized/'+q,function(s,t){r(t.section);});},setActiveSectionID:function(q){!n&&j.onLeave(o);n=q;}});l(p.prototype,{appendSection:function(q){this.childSections.append(q.id,q);q._parentSection=this;},freeze:function(){this.freezeChildren();},freezeChildren:function(){var q=this.childSections.getHead();while(q){!q.isActive()&&q.freeze();q=q.getNext();}},getNext:function(){return this._parentSection&&this._parentSection.childSections.getNext(this.id);},getPrev:function(){return this._parentSection&&this._parentSection.childSections.getPrev(this.id);},isActive:function(){var q=this;while(q){if(q.id===n)return true;q=q._parentSection;}return false;},isLoaded:function(){return this._isLoaded;},setIsLoaded:function(q){this._isLoaded=q;return this;},scrollTo:function(){if(!m(this.nodeID))return;h.scrollTo(this.getNode(),true,false,false,h.scrollTo.bind(this).curry(this.getNode(),0));},thaw:function(){this.thawChildren();},thawChildren:function(){var q=this.childSections.getHead();while(q){q.thaw();q=q.getNext();}}});e.exports=p;});
__d("TimelineDynamicSection",["Class","DOM","TimelineSection","copyProperties","cx","ge","TimelineDynamicSectionConfig"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('TimelineSection'),j=b('copyProperties'),k=b('cx'),l=b('ge'),m=b('TimelineDynamicSectionConfig');function n(o,p,q){this._controller=p;this._data=null;this._node=null;this._triggerLoader=null;this.parent.construct(this,o,o,q);}g.extend(n,i);j(n.prototype,{_createNode:function(){return h.create('div',{className:"_30f",id:this.nodeID},[m.throbber.cloneNode(true)]);},getNode:function(){if(!this._node)this._node=l(this.nodeID)||this._createNode();return this._node;}});e.exports=n;});
__d("TimelineAppCollection",["function-extensions","Class","CSS","DOM","DOMQuery","Event","MedleyPageletRequestData","NumberFormatConfig","PageTransitions","Parent","Style","TidyArbiter","TidyArbiterMixin","TimelineDynamicSection","TimelineSection","TriggerablePageletLoader","TimelineDynamicSectionConfig","copyProperties","csx","cx","ads-lib-formatters","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('Event'),l=b('MedleyPageletRequestData'),m=b('NumberFormatConfig'),n=b('PageTransitions'),o=b('Parent'),p=b('Style'),q=b('TidyArbiter'),r=b('TidyArbiterMixin'),s=b('TimelineDynamicSection'),t=b('TimelineSection'),u=b('TriggerablePageletLoader'),v=b('TimelineDynamicSectionConfig'),w=b('copyProperties'),x=b('csx'),y=b('cx'),z=b('ads-lib-formatters'),aa=b('ge'),ba=500,ca=8;function da(ha){var ia=aa(ga.getIDByToken(ha));if(!ia)return;return i.scry(ia,"._620")[0];}function ea(ha,ia){ia&&!ia.isDefaultRequested()&&ia.prevent();var ja=ha._parentSection,ka=ja._parentSection;t.setActiveSectionID(ja.id);ja.setActiveCollection(ha);if(ja._sk===ka._sk){if(!h.hasClass(ka.getNode(),"_c4f")){h.addClass(ka.getNode(),"_c4f");ka.freezeChildren();}ha._isFullyLoaded&&ka.addSectionTeasers();}if(!ka.isMedleyView()&&ja._sk===ka._sk){var la=ha.href;n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),la);}}function fa(ha,ia){ia.data.overview=ha._parentSection._sk!==ha._parentSection._parentSection._sk;ia.data.cursor=null;ea(ha);}function ga(ha,ia,ja,ka,la,ma){this._contentLoader=null;this._isFrozen=false;this._isFullyLoaded=false;this._cursor=0;this._tabNode=ja;this._tabCount=ka>0?ka:0;this._token=ha;this._ftid=null;this.auxContent=null;this.curationContent=null;this._order=la;this.href=ma;this._sortContent=null;this.refreshCount();this.parent.construct(this,ga.getIDByToken(ha),ia);if(!ja)return;if(aa(this.nodeID)){k.listen(ja,'click',ea.curry(this));}else this.createTriggerLoader.bind(this).defer();}g.extend(ga,s);w(ga,r,{NEW_ITEM:'TimelineAppCollection/newItem',ADDING_PLACEHOLDER:'TimelineAppCollection/addingPlaceholder',addPlaceholderToCollection:function(ha,ia,ja){ja=typeof ja!=='undefined'?ja:{};if(!ja.suppressCount)this.incrementCount(ga.getIDByToken(ha));t.callWithSection(ga.getIDByToken(ha),function(ka){var la=i.scry(ia,"._gx7")[0].cloneNode(true),ma=i.scry(ia,"._gx8 .img")[0],na=i.scry(ia,"._3owb")[0],oa=na&&na.getAttribute('data-obj');if(!la||!oa)return;ka.inform(ga.ADDING_PLACEHOLDER);var pa=da(ha);if(!pa)return;var qa=i.scry(pa,'[data-obj="'+oa+'"]')[0],ra=i.create('div',{className:"_4-he"});if(ma)p.set(ra,'background-image','url('+ma.src+')');var sa=i.create('div',{className:"_gx8"},[ra]),ta=i.create('div',{className:"_gx6"},[la]),ua=i.create('div',{className:"_3owb"},[sa,ta]),va=i.create('li',{className:"_5rz",id:'collectionItemPlaceholder'+oa},[ua]);if(qa&&ja.replaceExistingElement){i.replace(qa.parentNode,va);}else{if(qa){i.remove(qa.parentNode);}else if(ka.isOverview()&&pa.children.length>=ca)h.addClass(pa.children[ca-1],"_51k9");i.prependContent(pa,va);}});},replaceItem:function(ha,ia,ja){var ka=o.byClass(ha,"_620"),la=i.scry(ka,'div[data-obj="'+ia+'"]')[0];if(la){ga.inform(ga.NEW_ITEM,{grid:ka,newItem:ja});i.replace(la.parentNode,ja);}},addItemToCollection:function(ha,ia,ja){var ka=aa(ja);if(!ka)return;var la=i.scry(ka,"._620")[0],ma=la.parentNode.nextSibling;if(ma&&h.hasClass(ma,"_3t3"))i.remove(la.lastChild);this.inform(ga.NEW_ITEM,{grid:la,newItem:ha});var na=aa('collectionItemPlaceholder'+ia);if(na){i.replace(na,ha);return;}i.prependContent(la,ha);},createFromArray:function(ha){return ha.map(function(ia){return new ga(ia.token,ia.controller,ia.tab_node,ia.tab_count,ia.order,ia.href);});},decrementCount:function(ha){t.callWithSection(ha,function(ia){if(ia._tabCount>0){ia._tabCount--;ia.refreshCount();ia.flashCountIf();}});},enableContentLoader:function(ha,ia,ja){t.callWithSection(ha,function(ka){ka.addContentLoader(ia,ja);});},getIDByToken:function(ha){return 'pagelet_timeline_app_collection_'+ha;},incrementCount:function(ha){t.callWithSection(ha,function(ia){ia._tabCount++;ia.refreshCount();ia.flashCountIf();});},registerAuxContent:function(ha,ia){t.callWithSection(ha,function(ja){ja.registerAuxContent(ia);});},registerAddCurationContent:function(ha,ia,ja,ka){t.callWithSection(ha,function(la){la.registerAddCurationContent(ia,ja,ka);});},registerSortContent:function(ha,ia,ja){t.callWithSection(ha,function(ka){ka.registerSortContent(ia,ja);});},setLoaded:function(ha){t.callWithSection(ha,function(ia){ia.setIsLoaded(true);ia._parentSection.inform('loaded',ia);ia._parentSection.unsetMinHeight();});},setFullyLoaded:function(ha){t.callWithSection(ha,function(ia){ia._isFullyLoaded=true;var ja=ia._parentSection;ja._sk===ja._parentSection._sk&&ja._parentSection.addSectionTeasers();});},setFTID:function(ha,ia){t.callWithSection(ha,function(ja){ja.setFTID(ia);});},switchToNullStateCurationContent:function(ha){t.callWithSection(ga.getIDByToken(ha),function(ia){ia.nullStateCurationContent();});}});w(ga.prototype,r,{addContentLoader:function(ha,ia){this._cursor=ia;q.subscribe('Medley/requestDataSet',function(){var ja={node:ha};if(h.hasClass(ha,"_3t3")){ja.type=u.TRIGGER_CLICK;}else if(this._isFrozen){i.remove(ha);ja.node=v.pager.cloneNode(true);i.appendContent(this.getNode(),ja.node);ja.type=u.TRIGGER_CLICK;}else{ja.onVisibleBuffer=ba;ja.onVisibleStrict=true;ja.type=u.TRIGGER_ONVISIBLE;}if(ja.type===u.TRIGGER_CLICK)ja.callback=t.setActiveSectionID.curry(this.id);var ka=w({displayCallback:function(la){i.remove(ja.node);la();},options:{append:true}},this.getDefaultPageletConfig());ka.data.overview=this.isOverview();this._triggerLoader=null;this._contentLoader=new u(ka,[ja]);}.bind(this));},_createNode:function(){var ha=this.parent._createNode();ha.setAttribute('aria-role','tabpanel');return ha;},createTriggerLoader:function(){q.subscribe('Medley/requestDataSet',function(){var ha=this.getDefaultPageletConfig(),ia={callback:fa.curry(this,ha),node:this._tabNode,type:u.TRIGGER_CLICK};this._triggerLoader=new u(ha,[ia]);}.bind(this));},disableContentLoader:function(){this._contentLoader&&this._contentLoader.disableTriggers();},enableContentLoader:function(){var ha=this._triggerLoader||this._contentLoader;ha&&ha.enableTriggers();},freeze:function(){this._isFrozen=true;if(!this._contentLoader||this._contentLoader._loading)return;this._contentLoader.removeTriggers(u.TRIGGER_ONVISIBLE);var ha=j.scry(this.getNode(),"._3t3");if(!ha.length){var ia=j.scry(this.getNode(),"._359")[0];ia.length&&this.addContentLoader(ia,this._cursor);}},getCount:function(){return this._tabCount;},getDefaultPageletConfig:function(){return {controller:this._controller,data:w({collection_token:this._token,cursor:this._cursor},l.get(),{ftid:this._ftid,order:this._order},{sk:this._parentSection._sk}),node:this.getNode()};},getMedleySiteKey:function(){return this._parentSection._parentSection._sk;},flashCountIf:function(){if(this._parentSection.getActiveCollection()!=this){h.addClass(this._tabNode,"_4-k9");setTimeout(h.removeClass.curry(this._tabNode,"_4-k9"),800);}},isOverview:function(){return this._parentSection._sk!=this._parentSection._parentSection._sk;},registerAuxContent:function(ha){this.auxContent=ha;if(ha.nodeType==11)this.auxContent=i.create('span',null,ha);if(this._parentSection._activeCollection!==this)h.hide(this.auxContent);this._parentSection.addAuxContent(this.auxContent);},registerAddCurationContent:function(ha,ia,ja){if(this.curationContent)return;this.curationContent=(ha.nodeType==11)?i.create('span',null,ha):ha;this.curationContentState=ia;this._parentSection.addCurationContent(this.curationContent,this,ja);},nullStateCurationContent:function(){this._parentSection.nullStateCurationContent();},registerSortContent:function(ha,ia){this._sortContent&&i.remove(this._sortContent);this._sortContent=ha;ia.subscribeOnce('change',function(ja,ka){i.setContent(i.find(ha,"._57oy"),ka.label);this._sort(ka.value);}.bind(this));},refreshCount:function(){if(!this._tabNode)return;var ha=j.find(this._tabNode,"._3d0");if(this._tabCount>0){i.setContent(ha,z.formatNumber(this._tabCount,0,m.numberDelimiter,''));}else i.setContent(ha,'');},_resetContent:function(){this._contentLoader&&this._contentLoader.destroy();i.remove(this.getNode());this._node=null;i.appendContent(j.find(this._parentSection.getNode(),"div._3i9"),this.getNode());this.addContentLoader(j.find(this.getNode(),"._359"),0);},setFTID:function(ha){this._ftid=ha;},_sort:function(ha){this._order=ha;this._resetContent();var ia=this._parentSection,ja=ia._parentSection;if(!ja.isMedleyView()&&ia._sk===ja._sk){var ka=n.getCurrentURI();ka.addQueryData({order:this._order});n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),ka);}},thaw:function(){this._isFrozen=false;},getToken:function(){return this._token;}});e.exports=ga;});
__d("TimelineCommentsLoader",["Event","CommentPrelude","CSS","DOM","Parent","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CommentPrelude'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('emptyFunction'),m={init:function(){m.init=l;g.listen(document.body,'click',function(n){var o=k.byClass(n.getTarget(),'fbTimelineFeedbackCommentLoader');if(o){n.kill();h.click(o,false);var p=k.byTag(o,'form'),q=j.scry(p,'li.uiUfiViewAll input');if(!q.length)q=j.scry(p,'li.fbUfiViewPrevious input');if(!q.length)q=j.scry(p,'a.UFIPagerLink');q[0].click();i.show(j.find(p,'li.uiUfiComments'));i.removeClass(o,'fbTimelineFeedbackCommentLoader');}});}};e.exports=m;});
__d("TimelineConstants",[],function(a,b,c,d,e,f){var g={DS_HEIGHT:'timeline-unit-height',DS_LOADED:'timeline-capsule-loaded',DS_SIDEORG:'timeline-unit-sideorg',DS_TAILBALANCE:'timeline-capsule-tailbalance',DS_COLUMN_HEIGHT_DIFFERENTIAL:'timeline-column-diff-height',FIXED_SIDE_LEFT:'left',FIXED_SIDE_RIGHT:'right',FIXED_SIDE_BOTH:'both',FIXED_SIDE_NONE:'none',SCROLL_TO_OFFSET:30,SUBSECTION_SCROLL_TO_OFFSET:90,SCRUBBER_DEFAULT_OFFSET:38,SECTION_LOADING:'TimelineConstants/sectionLoading',SECTION_LOADED:'TimelineConstants/sectionLoaded',SECTION_FULLY_LOADED:'TimelineConstants/sectionFullyLoaded',SECTION_REGISTERED:'TimelineConstants/sectionRegistered'};e.exports=g;});
__d("TimelineLegacySections",[],function(a,b,c,d,e,f){var g={},h={get:function(i){return g[i];},getAll:function(){return g;},remove:function(i){delete g[i];},removeAll:function(){g={};},set:function(i,j){g[i]=j;}};e.exports=h;});
__d("TimelineURI",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h={TIMELINE_KEY:'timeline',WALL_KEY:'wall',parseURI:function(i){i=g(i);var j=i.getQueryData(),k=i.getPath(),l=k.split('/').slice(1);if(l[0]=='people'||l[0]=='pages')l=l.slice(2);var m=j.sk||l[1]||h.TIMELINE_KEY;if(m==h.WALL_KEY)m=h.TIMELINE_KEY;var n=null,o=null;if(m==h.TIMELINE_KEY){o=parseInt(l[2],10)||null;n=parseInt(l[3],10)||null;}return {path:k,id:j.id||l[0],key:m,viewas:j.viewas?j.viewas:0,filter:j.filter?j.filter:null,year:o,month:n,friendship:!!j.and};}};e.exports=h;});
__d("TimelineController",["Event","Arbiter","CSS","DataStore","DOMQuery","Run","ScrollingPager","TidyArbiter","TimelineConstants","TimelineLegacySections","TimelineURI","Vector","ViewportBounds","$","copyProperties","ge","tidyEvent","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('CSS'),j=b('DataStore'),k=b('DOMQuery'),l=b('Run'),m=b('ScrollingPager'),n=b('TidyArbiter'),o=b('TimelineConstants'),p=b('TimelineLegacySections'),q=b('TimelineURI'),r=b('Vector'),s=b('ViewportBounds'),t=b('$'),u=b('copyProperties'),v=b('ge'),w=b('tidyEvent'),x=b('queryThenMutateDOM'),y=358,z=48,aa=740,ba=1285,ca=null,da=false,ea,fa,ga,ha={},ia={},ja=[],ka=null,la=null,ma=false,na=false,oa=0,pa=false,qa=false,ra=false,sa={},ta=false;function ua(){ka&&ka.remove();ka=null;}function va(hb,ib,jb){jb=jb||[];if(ha[hb])return ha[hb][ib].apply(ha[hb],jb);ia[hb]=ia[hb]||{};ia[hb][ib]=jb;return false;}function wa(){if(!(pa||ra||qa)){ua();return;}var hb=r.getScrollPosition();pa=pa&&ab(v('rightCol'),hb,'paddingTop',true);qa=qa&&ab(t('pagelet_above_header_timeline'),hb,'top');ra=ra&&ab(t('blueBar'),hb,'paddingTop');}var xa=0;function ya(){xa=r.getScrollPosition();}function za(){x(ya,function(){var hb=oa===0||xa.y>=oa;va(gb.STICKY_HEADER,'toggle',[hb]);va(gb.CONTENT,'checkCurrentSectionChange');},'TimelineController/scrollListener');}function ab(hb,ib,jb,kb){if(!hb){ua();return;}if(ib.y<=0){bb(hb,jb);return false;}else{var lb=kb&&gb.getCurrentScrubber();if(lb&&i.hasClass(lb.getRoot(),'fixed_elem')){bb(hb,jb);return false;}else{var mb=parseInt(hb.style[jb],10)||0;if(ib.y<mb){i.addClass(hb,'timeline_fixed');hb.style[jb]=ib.y+'px';}else i.removeClass(hb,'timeline_fixed');}}return true;}function bb(hb,ib){hb.style[ib]='0px';i.removeClass(hb,'timeline_fixed');}function cb(){x(gb.shouldShowWideAds,function(){va(gb.ADS,'adjustAdsType',[ma]);va(gb.ADS,'adjustAdsToFit');va(gb.CONTENT,'adjustContentPadding');va(gb.STICKY_HEADER_NAV,'adjustMenuHeights');},'TimelineController/resize');}function db(hb,ib){if(hb=='sidebar/initialized')ta=true;va(gb.ADS,'adjustAdsType',[gb.shouldShowWideAds()]);}function eb(hb,ib){var jb=v('rightCol');if(jb){jb.style.paddingTop=ib+'px';pa=true;}var kb=t('pagelet_above_header_timeline');if(kb.firstChild){t('above_header_timeline_placeholder').style.height=kb.offsetHeight+'px';kb.style.top=ib+'px';qa=true;}var lb=document.documentElement;ra=lb.clientHeight<400||lb.clientWidth<lb.scrollWidth;if(ra)t('blueBar').style.paddingTop=ib+'px';ka=g.listen(window,'scroll',wa);h.inform('reflow');}function fb(){while(ja.length)ja.pop().remove();for(var hb in ha)ha[hb].reset&&ha[hb].reset();ua();ga.unsubscribe();ga=null;ca=null;ea=null;ha={};ia={};la=null;na=false;oa=0;qa=false;if(pa){var ib=v('rightCol');if(ib){ib.style.paddingTop='';i.removeClass(ib,'timeline_fixed');}}pa=false;if(ra){t('blueBar').style.paddingTop='';i.removeClass(t('blueBar'),'timeline_fixed');}ra=false;ta=false;da=false;j.purge(o.DS_HEIGHT);j.purge(o.DS_LOADED);j.purge(o.DS_SIDEORG);j.purge(o.DS_TAILBALANCE);j.purge(o.DS_COLUMN_HEIGHT_DIFFERENTIAL);}var gb={NAV:'nav',STICKY_HEADER:'sticky_header',STICKY_HEADER_NAV:'sticky_header_nav',SCRUBBER:'scrubber',CONTENT:'content',ADS:'ads',LOGGING:'logging',init:function(hb,ib,jb){if(da)return;if(ib==q.WALL_KEY)ib=q.TIMELINE_KEY;da=true;ea=hb;fa=jb.has_fixed_ads;na=jb.one_column_minimal;sa={allactivity:true,approve:true};if(!na)u(sa,{games:true,map:true,music:true,video:true});sa[q.TIMELINE_KEY]=true;va(gb.CONTENT,'adjustContentPadding');ja.push(g.listen(window,'scroll',za),g.listen(window,'resize',cb));ga=h.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide'],db);w(n.subscribe('TimelineCover/coverCollapsed',eb));l.onLeave(fb);gb.registerCurrentKey(ib);},setAdsTracking:function(hb){va(gb.ADS,'start',[hb]);},pageHasScrubber:function(hb){return !hb||(!na&&hb.match(/^(og_)?app_/))||(hb in sa);},fixedAds:function(){return fa;},registerCurrentKey:function(hb){ca=hb;la=hb!=='map'&&r.getViewportDimensions().y<aa&&gb.pageHasScrubber(hb);la=la||t('blueBar').offsetTop;va(gb.ADS,'setShortMode',[la]);va(gb.ADS,'updateCurrentKey',[hb]);oa=hb==q.TIMELINE_KEY?y-z:0;},getCurrentKey:function(){return ca;},getCurrentScrubber:function(){return ha[gb.SCRUBBER];},getCurrentStickyHeaderNav:function(){return ha[gb.STICKY_HEADER_NAV];},scrubberHasLoaded:function(hb){i.conditionClass(hb.getRoot(),'fixed_elem',!la);va(gb.ADS,'registerScrubber',[hb]);},scrubberHasChangedState:function(){va(gb.ADS,'adjustAdsToFit');},scrubberWasClicked:function(hb){va(gb.LOGGING,'logScrubberClick',[hb]);},stickyHeaderNavWasClicked:function(hb){va(gb.LOGGING,'logStickyHeaderNavClick',[hb]);},sectionHasChanged:function(hb,ib){va(gb.STICKY_HEADER_NAV,'updateSection',[hb,ib]);va(gb.SCRUBBER,'updateSection',[hb,ib]);va(gb.ADS,'loadAdsIfEnoughTimePassed');va(gb.LOGGING,'logSectionChange',[hb,ib]);},navigateToSection:function(hb){va(gb.CONTENT,'navigateToSection',[hb]);},shouldShowWideAds:function(){if(!ta){ma=false;}else{var hb=ba+s.getRight()+s.getLeft();ma=r.getViewportDimensions().x>=hb;}return ma;},sidebarInitialized:function(){return ta;},adjustStickyHeaderWidth:function(){va(gb.STICKY_HEADER,'adjustWidth');},isOneColumnMinimal:function(){return na;},register:function(hb,ib){ha[hb]=ib;if(ia[hb]){for(var jb in ia[hb])va(hb,jb,ia[hb][jb]);delete ia[hb];}},adjustScrollingPagerBuffer:function(hb,ib){var jb=j.get(o.DS_COLUMN_HEIGHT_DIFFERENTIAL,ib);if(!jb)return;var kb=m.getInstance(hb);kb&&kb.setBuffer(kb.getBuffer()+Math.abs(jb));},runOnceWhenSectionFullyLoaded:function(hb,ib,jb){var kb=p.get(ib);if(kb){var lb=false;k.scry(kb.node,'.fbTimelineCapsule').forEach(function(nb){if(!lb&&parseInt(j.get(o.DS_LOADED,nb.id),10)>=parseInt(jb,10)){hb();lb=true;}});if(lb)return;}var mb=h.subscribe(o.SECTION_FULLY_LOADED,function(nb,ob){if(ob.scrubberKey===ib&&ob.pageIndex===jb){hb();mb.unsubscribe();}});}};e.exports=gb;});
__d("TimelineDrag",["Event","ArbiterMixin","Locale","Style","Vector","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('ArbiterMixin'),i=b('Locale'),j=b('Style'),k=b('Vector'),l=b('copyProperties');function m(n,o,p){p=p||{};this._listenOn=p.listenOn;this._offsetInput=o;this._defaultOffset=p.default_offset;this._killClicks=p.killClicks;this._vertical=true;this._RTLXSwitch=false;this.setPicture(n,p);}l(m.prototype,h,{setPicture:function(n,o){if(!n)return false;o=o||{};this._picture=n;this._defaultOffset=o.default_offset;if(o.offsetInput)this._offsetInput=o.offsetInput;if(o.vertical!==undefined)this._vertical=o.vertical;if(o.height)this._containerHeight=o.height;if(o.width)this._containerWidth=o.width;if(this._vertical){this._offsetType='top';this._eventCoord='y';}else{this._RTLXSwitch=i.isRTL();this._offsetType='left';this._eventCoord='x';}if(this._picture.complete){this._initialLoad();}else this._loadListener=g.listen(this._picture,'load',function(){this._loadListener.remove();this._initialLoad();}.bind(this));},destroy:function(){this._stopDrag();this._saveOffset();this._mousedown&&this._mousedown.remove();this._onclick&&this._onclick.remove();this._loadListener&&this._loadListener.remove();},_initialLoad:function(){var n=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=g.listen(n,'mousedown',this._onMouseDown.bind(this));if(this._vertical){this._maxOffset=this._containerHeight-this._picture.offsetHeight;}else this._maxOffset=this._containerWidth-this._picture.offsetWidth;if(this._defaultOffset!==undefined)this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();if(this._killClicks)this._onclick=g.listen(n,'click',this._onClick.bind(this));this._saveOffset();},_onClick:function(event){event.kill();},_onMouseDown:function(event){var n=parseInt(j.get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=n-k.getEventPosition(event)[this._eventCoord];this._startDrag();event.kill();},_startDrag:function(){if(!this._dragStarted){this.inform('startdrag',this);this._dragTokens=[g.listen(document.documentElement,'mouseup',this._onMouseUp.bind(this)),g.listen(document.documentElement,'mousemove',this._onMouseMove.bind(this))];this._dragStarted=true;}},_saveOffset:function(){var n=parseInt(j.get(this._picture,this._offsetType),10);if(this._RTLXSwitch){this._offsetInput.value=n+this._containerWidth-this._picture.offsetWidth;}else this._offsetInput.value=n;},_stopDrag:function(){if(this._dragStarted){this.inform('stopdrag',this);this._dragStarted=false;this._dragTokens.forEach(function(n){n.remove();});this._saveOffset();}},_onMouseUp:function(event){this._stopDrag();event.kill();},_setOffset:function(n){if(this._RTLXSwitch){n=Math.max(0,Math.min(n,-this._maxOffset));}else n=Math.min(0,Math.max(n,this._maxOffset));j.set(this._picture,this._offsetType,n+'px');},_onMouseMove:function(event){this._setOffset(this._pictureStartDragOffset+k.getEventPosition(event)[this._eventCoord]);event.kill();}});e.exports=m;});
__d("TimelineCover",["Arbiter","Button","CSS","DOM","HTML","Parent","DOMScroll","TimelineController","TimelineDrag","Style","Vector","$","copyProperties","cx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Button'),i=b('CSS'),j=b('DOM'),k=b('HTML'),l=b('Parent'),m=b('DOMScroll'),n=b('TimelineController'),o=b('TimelineDrag'),p=b('Style'),q=b('Vector'),r=b('$'),s=b('copyProperties'),t=b('cx'),u=b('ge');function v(w,x,y){this.root=r('fbProfileCover');if(typeof x==='object'){this._coverHeight=x.cover_height;this._coverWidth=x.cover_width;this.previewing=x.previewing;this._isLegacy=false;}else{this._isLegacy=true;this._coverHeight=x;this.previewing=y;}this._parentSection=l.byClass(this.root,'fbTimelineSection');this.cover=j.find(this.root,'.cover');v.instance=this;this.editing=false;if(!this._parentSection)this._parentSection=l.byClass(this.root,'fbEventHeader');if(this.previewing){this.editMode();this.updateCoverImage(this.previewing);}}v.instance=null;v.getInstance=function(){return v.instance;};s(v.prototype,{showLoadingIndicator:function(){var w=u('fbCoverImageContainer');if(w)i.addClass(w,'opaquedLoading');},hideLoadingIndicator:function(){var w=u('fbCoverImageContainer');if(w)i.removeClass(w,'opaquedLoading');},isCoverImageVerticalFlow:function(w){return !(w.style.height);},editMode:function(){h.setEnabled(j.find(this.root,'button.cancelButton'),true);h.setEnabled(j.find(this.root,'button.saveButton'),true);this.hideLoadingIndicator();this._coverImage=j.scry(this.root,'.coverImage')[0];var w=j.scry(this._coverImage,'.coverWrap')[0];if(w){var x=j.find(w,'.coverPhotoImg');this._originalIsVertical=this.isCoverImageVerticalFlow(x);this._originalOffset=p.get(x,this._originalIsVertical?'top':'left');}i.addClass(this._parentSection,'fbEditCover');m.scrollTo(this.root);if(this.previewing){j.remove(this._coverImage);i.show(this._coverImage);}var y=j.scry(this._coverImage,'.coverPhotoImg')[0];if(y)this._createDragger();this.editing=true;g.inform('CoverPhotoEdit',{sender:this,state:"open"});},_exitEditMode:function(){if(this._timelineDrag){this._timelineDrag.destroy();this._timelineDrag=null;}j.find(this.root,'input.hiddenPhotoID').value=null;j.find(this.root,'input.hiddenVideoID').value=null;h.setEnabled(j.find(this.root,'button.cancelButton'),false);h.setEnabled(j.find(this.root,'button.saveButton'),false);i.removeClass(this._parentSection,'fbEditCover');this.hideLoadingIndicator();this.previewing=false;g.inform('CoverPhotoEdit',{sender:this,state:"closed"});},_createDragger:function(w){var x;if(this._isLegacy){x=j.find(this.root,'input.photoOffsetInput');this._originalIsVertical=true;}else{var y=w===undefined?this._originalIsVertical:w;x=y?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');}this._timelineDrag=new o(j.find(this.root,'.coverImage .coverPhotoImg'),x,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:y,killClicks:true});},updateCoverImage:function(w,x,y){this.videoID=y;if(x)this.editMode();j.find(this.root,'input.hiddenPhotoID').value=w;j.find(this.root,'input.hiddenVideoID').value=y||null;h.setEnabled(j.find(this.root,'button.saveButton'),true);if(x)j.replace(j.find(this.root,'.coverImage'),k(x));var z=j.find(j.find(this.root,'.coverImage'),'.coverPhotoImg'),aa=this.isCoverImageVerticalFlow(z),ba;if(this._isLegacy){ba=j.find(this.root,'input.photoOffsetInput');}else ba=aa?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');if(this._timelineDrag){this._timelineDrag.setPicture(z,{offsetInput:ba,vertical:aa});}else this._createDragger(aa);},cancelUpdate:function(){j.remove(j.scry(this.root,'.coverImage')[0]);j.prependContent(this.cover,this._coverImage);if(this._originalOffset!==undefined)p.set(j.find(this._coverImage,'.coverPhotoImg'),this._originalIsVertical?'top':'left',this._originalOffset);this._exitEditMode();},saveComplete:function(){this._coverImage=j.scry(this.root,'.coverImage')[0];var w=l.byClass(this.root,'fbTimelineTopSectionBase');w&&i.removeClass(w,"_6_5");this._exitEditMode();},isInEditMode:function(){return this.editing;}});e.exports=v;});
__d("TimelineCapsule",["Arbiter","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineLegacySections","UserAgent","Vector","$","createArrayFrom","csx","isEmpty","queryThenMutateDOM","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('DOMQuery'),l=b('DOMScroll'),m=b('Parent'),n=b('TimelineConstants'),o=b('TimelineLegacySections'),p=b('UserAgent'),q=b('Vector'),r=b('$'),s=b('createArrayFrom'),t=b('csx'),u=b('isEmpty'),v=b('queryThenMutateDOM'),w=b('requestAnimationFrame'),x=(function(){var y=45,z=15,aa='use',ba='update',ca={},da={};function ea(ra){return h.hasClass(ra,'fbTimelineBalancer');}function fa(ra){return ra.getAttribute('data-spine');}function ga(ra){return h.hasClass(ra,'placeholderUnit');}function ha(ra,sa){if(sa)return (i.get(n.DS_SIDEORG,ra.id)||ra.getAttribute('data-side'));return ra.getAttribute('data-side');}var ia=function(ra,sa){if(p.ie()<=6){ia=function(ta,ua){i.set(n.DS_SIDEORG,ta.id,ha(ta,true));ta.setAttribute('data-side',ua);h.removeClass(ta,'leftColumn');h.removeClass(ta,'rightColumn');h.addClass(ta,ua=='l'?'leftColumn':'rightColumn');};}else ia=function(ta,ua){i.set(n.DS_SIDEORG,ta.id,ha(ta,true));ta.setAttribute('data-side',ua);};ia(ra,sa);};function ja(ra){return ra.getAttribute('data-size');}function ka(ra){if(h.hasClass(ra,'fbTimelineOneColumn')&&ra.prevSibling&&h.hasClass(ra.prevSibling,'fbTimelineOneColumn'))return z*2;if(h.hasClass(ra,'fbTimelineIndeterminateContent'))return 0;return z;}function la(ra,sa){var ta=0;if(h.shown(ra)&&!h.hasClass(ra,'placeholderUnit'))if(sa===aa){ta=i.get(n.DS_HEIGHT,ra.id,null);if(ta===null)ta=ra.getAttribute('data-calculatedheight');}else ta=ra.offsetHeight+ka(ra);if(sa===aa&&ta===null)ta=300;i.set(n.DS_HEIGHT,ra.id,parseInt(ta,10));}function ma(ra){var sa=i.get(n.DS_HEIGHT,ra.id,null);return sa;}function na(ra,sa){if(ja(sa)=='2'){return 0;}else if(ha(sa)=='r'){return ra+ma(sa);}else return ra-ma(sa);}function oa(ra){k.scry(ra,"._3ram").forEach(function(sa){var ta=sa.getAttribute('data-endmarker'),ua=sa.getAttribute('data-pageindex'),va=function(){if(!sa.parentNode)return;i.set(n.DS_LOADED,ra.id,ua);j.remove(sa);g.inform(n.SECTION_FULLY_LOADED,{scrubberKey:ta,pageIndex:ua,capsuleID:ra.id,childCount:ra.childNodes.length});};if(o.get(ta)){va();}else var wa=g.subscribe(n.SECTION_REGISTERED,function(xa,ya){if(ya.scrubberKey===ta){va();wa.unsubscribe();}});});g.inform('TimelineCapsule/balanced',{capsule:ra});}function pa(ra){if(u(ca[ra.id]))return;var sa=ea(ra)?ra.firstChild:ra,ta=sa.childNodes.length,ua={},va={},wa,xa=z,ya=z,za,ab=[];for(var bb=0;bb<ta;bb++){wa=sa.childNodes[bb];if(h.hasClass(wa,'fbTimelineUnit')){za=k.scry(wa,'div.timelineUnitContainer')[0];if(za)va[wa.id]=za.getAttribute('data-time');if(!ga(wa)&&h.shown(wa)){if(ja(wa)=='2'){ua[wa.id]=Math.max(xa,ya);xa=ya=ua[wa.id]+ma(wa);}else if(ha(wa)=='r'){ua[wa.id]=ya;ya+=ma(wa);}else{ua[wa.id]=xa;xa+=ma(wa);}if(ha(wa,true)=='l'||ja(wa)=='2')ab.push(wa.id);}}}for(bb=0;bb<ab.length-1;++bb){var cb=ab[bb],db=ab[bb+1],eb=ua[cb]+y,fb=ua[db];for(var gb in ca[ra.id]){if(eb>fb)break;var hb=ca[ra.id][gb];if(h.shown(hb))continue;if(va[gb]<=va[cb]&&va[gb]>va[db]){hb.style.top=eb+"px";eb+=y;h.show(hb);}}}}function qa(ra,sa){var ta=m.byAttribute(ra,'data-size');if(ta){if(h.hasClass(ra.parentNode,'timelineReportContent')){sa(ra);}else sa(ta);x.balanceCapsule(m.byClass(ta,'fbTimelineCapsule'));}}return {removeUnit:function(ra){qa(ra,function(sa){j.remove(sa);});},hideUnit:function(ra){qa(ra,function(sa){h.addClass(sa,'fbTimelineColumnHidden');});},undoHideUnit:function(ra,sa){j.remove(m.byClass(sa,'hiddenText'));qa(ra,function(ta){h.removeClass(ta,'fbTimelineColumnHidden');});},unplacehold:function(ra){var sa=r(ra);sa.style.top=null;h.removeClass(sa,'visiblePlaceholder');h.removeClass(sa,'placeholder');var ta=m.byClass(sa,'fbTimelineCapsule');delete ca[ta.id][ra];x.balanceCapsule(ta);},scrollToCapsule:function(ra){if(!da.hasOwnProperty(ra.id)){var sa=q.getElementPosition(ra.parentNode);l.scrollTo(new q(q.getScrollPosition().x,sa.y-n.SUBSECTION_SCROLL_TO_OFFSET,'document'));da[ra.id]=true;}},balanceCapsuleFromChild:function(ra,sa){x.balanceCapsule(m.byClass(ra,'fbTimelineCapsule'),sa);},balanceCapsuleDeferred:function(ra,sa){x.balanceCapsule.curry(ra,sa).defer();},balanceCapsule:function(ra,sa){if(!ra||!ra.childNodes)return;var ta=0,ua,va=document.createDocumentFragment(),wa=[],xa=[],ya=[],za=false,ab=sa&&sa.heights_action;if(sa&&sa.tail_balance)i.set(n.DS_TAILBALANCE,ra.id,sa.tail_balance);if(ab!==ba&&(p.chrome()||p.webkit()))h.toggleClass(ra,'webkitFix');for(var bb=0;bb<ra.childNodes.length;bb++){ua=ra.childNodes[bb];if(fa(ua)){continue;}else if(ea(ua)){s(ua.firstChild.childNodes).forEach(function(jb){la(jb,ab);});continue;}la(ua,ab);if(ha(ua,true)=='r'){xa.push(ua);}else wa.push(ua);ya.push(ua);if(ja(ua)!='2')if((ta>0&&ha(ua)=='r')||(ta<0&&ha(ua)=='l'))za=true;ta=na(ta,ua);}var cb=[],db=[],eb=[];k.scry(ra,'li.fbTimelineBalancer').forEach(function(jb){var kb=s(jb.firstChild.childNodes);if(jb.getAttribute('data-nonunits')){eb=eb.concat(kb);}else if(ha(jb)=='left'){cb=cb.concat(kb);}else if(ha(jb)=='right')db=db.concat(kb);});if(za){ra.style.minHeight=ra.offsetHeight;wa.forEach(function(jb){if(ja(jb)!='2')ia(jb,'l');});xa.forEach(function(jb){if(ja(jb)!='2')ia(jb,'r');});var fb=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,wa));fb.setAttribute('data-side','left');j.prependContent(ra,fb);cb=wa.concat(cb);var gb=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,xa));gb.setAttribute('data-side','right');j.prependContent(ra,gb);db=xa.concat(db);ta=0;}while(eb.length)va.appendChild(eb.shift());while((ta>=0&&cb.length)||(ta<0&&db.length)){if(ta>=0){ua=cb.shift();}else ua=db.shift();va.appendChild(ua);ta=na(ta,ua);}ra.appendChild(va);k.scry(ra,'li.fbTimelineBalancer').forEach(function(jb){if(!jb.firstChild.childNodes.length)j.remove(jb);});var hb=(sa&&sa.tail_balance)||i.get(n.DS_TAILBALANCE,ra.id);if(hb)ta=x.tailBalance(ra,ta,hb);if(za){ya.forEach(function(jb){if(jb.parentNode!==ra){ra.appendChild(jb);ta=na(ta,jb);}});ra.style.minHeight=null;}var ib=m.byClass(ra,'fbTimelineSection');if(ib)i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,ib.id,ta);ca[ra.id]={};k.scry(ra,'li.placeholderUnit').forEach(function(jb){ca[ra.id][jb.id]=jb;});pa(ra);oa(ra);if(ab===aa){sa.heights_action=ba;w(function(){w(x.balanceCapsule.curry(ra,sa));});}},tailBalance:function(ra,sa,ta){if(!ra)return sa;var ua=[],va=[],wa=[],xa=[];k.scry(ra,'li.fbTimelineBalancer').forEach(function(za){var ab=s(za.firstChild.childNodes);if(za.getAttribute('data-nonunits')){xa=xa.concat(ab);}else if(ha(za)=='left'){va=va.concat(ab);}else if(ha(za)=='right')wa=wa.concat(ab);ua=ua.concat(ab);});if((ta==n.FIXED_SIDE_RIGHT&&va.length)||(ta==n.FIXED_SIDE_LEFT&&wa.length))return sa;var ya=document.createDocumentFragment();if(ua)while(ua.length){if(ta!=n.FIXED_SIDE_NONE)if(ja(ua[0])!='2')if(sa>=0){ia(ua[0],'l');}else ia(ua[0],'r');sa=na(sa,ua[0]);ya.appendChild(ua.shift());}ra.appendChild(ya);k.scry(ra,'li.fbTimelineBalancer').forEach(function(za){if(!za.firstChild.childNodes.length)j.remove(za);});return sa;},loadTwoColumnUnits:function(ra){var sa=r(ra);v(function(){var ta=m.byClass(sa,'fbTimelineSection');if(ta){var ua=k.find(sa,"._3rbf"),va=k.find(sa,"._3rbh"),wa=va.offsetHeight-ua.offsetHeight;i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,ta.id,wa);}},oa.curry(sa));}};})();e.exports=a.TimelineCapsule||x;});
__d("TimelineCapsuleUtilities",["CSS"],function(a,b,c,d,e,f){var g=b('CSS'),h={setFirstUnit:function(i){var j=true;for(var k=0;k<i.childNodes.length;++k){var l=i.childNodes[k];if(l.id.indexOf('tl_unit_')===0)if(j){j=false;g.addClass(l,'firstUnit');}else{g.removeClass(l,'firstUnit');break;}}}};e.exports=h;});
__d("TimelineUnitSelector",["DOMQuery","Parent"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('Parent'),i={getUnitsWithTime:function(j){return g.scry(j,'div.timelineUnitContainer').filter(function(k){return (h.byClass(k,'fbTimelineCapsule')===j&&k.getAttribute('data-time'));});}};e.exports=i;});
__d("TimelineComposerUtilities",["Event","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineUnitSelector","Vector","cx","csx"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('Parent'),n=b('TimelineUnitSelector'),o=b('Vector'),p=b('cx'),q=b('csx'),r=86400*31,s=86400000,t={listenToSetEstimatedDate:function(u,v){return h.subscribe('ComposerXTimelineTagger/init',function(w,x){if(l.contains(u,x.datePickerElement)){t.setEstimatedDate(x.datePickerInstance,v());x.composerTimelineTagger.switchToTagger('date');}});},listenToSetEstimatedDateOld:function(u,v){return h.subscribe('TimelineBackdatedComposerTagger/initialized',function(event,w){if(w.composer===u)w.date_picker.subscribe('initialized',function(x,y){t.setEstimatedDate(y,v());});});},listenToPublish:function(u,v){if(u.root)u=u.root;return h.subscribe('composer/publish',function(event,w){if(w.composer_id===u.id)i.loadModules(['TimelineStoryPublisher'],function(x){x.publish(w);v&&v();});});},listenToAnotherComposerOpen:function(u,v){return h.subscribe('composer/mutate',function(w,x){if(x!==u)v();});},listenToCancel:function(u,v){return g.listen(u,'click',function(event){if(m.byClass(event.getTarget(),"_306"))v();});},listenToCancelOld:function(u,v){return g.listen(u,'click',function(event){m.byClass(event.getTarget(),'cancelBtn')&&v();});},hidePlaceIfAttachmentsTooTall:function(u){var v=l.find(u,"._2_4"),w=o.getElementDimensions(v).y;if(w>50)j.hide(l.find(v,"._mg"));},hidePlaceIfAttachmentsTooTallOld:function(u){var v=k.find(u,'ul.fbTimelineComposerAttachments'),w=o.getElementDimensions(v).y;if(w>50){var x=m.byTag(k.scry(v,'span.placeAttachment')[0],'li');x&&j.hide(x);}},setEstimatedDate:function(u,v){var w,x;if(v&&j.hasClass(v,'fbTimelineCapsule')){w=v.getAttribute('data-start');x=v.getAttribute('data-end');if(w&&x){var y=new Date(x*1000),z=new Date();if(y>z){u.setDate(z.getFullYear(),z.getMonth()+1,z.getDate());}else if(x-w>2*r){u.setDate(y.getFullYear());}else u.setDate(y.getFullYear(),y.getMonth()+1);}return;}var aa=m.byClass(v,'fbTimelineCapsule');if(aa){w=aa.getAttribute('data-start');x=aa.getAttribute('data-end');var ba=o.getElementPosition(v).y,ca=[x,null],da=[w,null],ea=n.getUnitsWithTime(aa);for(var fa=0;fa<ea.length;fa++){var ga=ea[fa],ha=k.scry(ga.parentNode,'.spinePointer')[0];if(!ha)continue;var ia=o.getElementPosition(ha).y;if(ia<=ba){if(!ca[1]||ia>ca[1])ca=[ga.getAttribute('data-time'),ia];}else if(!da[1]||ia<da[1])da=[ga.getAttribute('data-time'),ia];}if(ca[0]!==null&&da[0]!==null){var ja=Math.round((parseInt(ca[0],10)+parseInt(da[0],10))/2)*1000;ja=Math.min(new Date()-s,ja);u.setDateWithTimestamp(ja);}}},showMLEFlyout:function(u){var v=k.scry(document,'a.fbTimelineSpine').length===0,w=function(x){x.showMLEFlyout(u);};if(v){i.loadModules(['TimelineSpinelessComposer'],w);}else i.loadModules(['TimelineComposer'],w);}};e.exports=t;});
__d("TimelineComposer",["Arbiter","Bootloader","CSS","DOM","Parent","Run","TimelineCapsule","TimelineCapsuleUtilities","TimelineComposerUtilities","$","cx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Run'),m=b('TimelineCapsule'),n=b('TimelineCapsuleUtilities'),o=b('TimelineComposerUtilities'),p=b('$'),q=b('cx'),r;function s(x){if(x.isScheduledPost||x.isOGPost)return;if(!x.streamStory){window.location.reload();return;}if(x.backdatedTime){h.loadModules(['TimelineStoryPublisher'],function(z){z.publish(x);});return;}var y=w.renderCapsuleBasedStory(r,x.streamStory);g.inform('TimelineComposer/on_after_publish',y,g.BEHAVIOR_PERSISTENT);}function t(){var x=k.byClass(r,'fbTimelineTwoColumn');return j.find(x,'.spinePointer');}function u(x){var y=v();i.show(y);var z=x.subscribe('hide',function(){i.hide(y);x.unsubscribe(z);});}function v(){var x=k.byClass(r,'fbTimelineTwoColumn'),y=j.scry(x,'div.composerVeil');if(y.length!==1)y=j.appendContent(x,j.create('div',{className:'composerVeil hidden_elem'}));return y[0];}var w={init:function(x){r=p(x);var y=g.subscribe('composer/publish',function(event,z){if(z.composer_id===r.id)s(z);});l.onLeave(y.unsubscribe.bind(y));if(i.hasClass(r,"_mj")){o.hidePlaceIfAttachmentsTooTall(r);}else o.hidePlaceIfAttachmentsTooTallOld(r);},showMLEFlyout:function(x){x.setContext(t()).show();u(x);},renderCapsuleBasedStory:function(x,y){var z=k.byClass(x,'fbTimelineCapsule');if(!z)return;var aa=k.byClass(x,'timelineUnitContainer').parentNode;if(aa.nextSibling.getAttribute('data-spine'))aa=aa.nextSibling;var ba=j.insertAfter(aa,y)[0];h.loadModules(['Animation'],function(ca){new ca(ba.firstChild).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(ca.ease.both).go();});n.setFirstUnit(z);m.balanceCapsule(z);return ba;}};e.exports=a.TimelineComposer||w;});
__d("TimelineSmartInsert",["Run","UserAgent","Vector"],function(a,b,c,d,e,f){var g=b('Run'),h=b('UserAgent'),i=b('Vector'),j=100;function k(q){if(q==='viewport')return i.getViewportDimensions().y;return q;}var l=false,m=false;function n(){if(m)return;g.onLeave(o);m=true;}function o(){l=false;m=false;}var p={run:function(q,r,s){n();if(!l||h.ie()<=8){r();return;}var t=q.offsetHeight;r();var u=q.offsetHeight,v=i.getScrollPosition().y,w=i.getElementPosition(q).y;if(u!==t&&w<v&&w+t<v+k(s||j))window.scrollBy(0,u-t);},enable:function(){l=true;}};e.exports=p;});
__d("TimelineContentLoader",["Event","function-extensions","Arbiter","CSS","DOM","DOMScroll","OnVisible","ScrollingPager","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","TimelineURI","UIPagelet","UserAgent","Vector","$","arrayContains","copyProperties","createArrayFrom","csx","debounce","ge","startsWith","tx","userAction"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('DOMScroll'),l=b('OnVisible'),m=b('ScrollingPager'),n=b('TimelineConstants'),o=b('TimelineController'),p=b('TimelineLegacySections'),q=b('TimelineSmartInsert'),r=b('TimelineURI'),s=b('UIPagelet'),t=b('UserAgent'),u=b('Vector'),v=b('$'),w=b('arrayContains'),x=b('copyProperties'),y=b('createArrayFrom'),z=b('csx'),aa=b('debounce'),ba=b('ge'),ca=b('startsWith'),da=b('tx'),ea=b('userAction'),fa=false,ga=false,ha,ia=null,ja={},ka=[],la=[],ma=[],na={},oa={},pa={},qa={},ra=null,sa=null,ta=false,ua=null;function va(eb,fb,gb,hb,ib){this.node=eb;this.loaded=hb;this.canScrollLoad=true;this.canUnload=fb!=db.RECENT;this.scrubberKey=fb;this.historicUnitCount=ib;this._pageletLoadData=gb;this._expandPageletLoadData={};this.rightColumnFinished=false;}x(va.prototype,{load:function(eb,fb){if(this.loaded)return;var gb=this._pageletLoadData;h.inform(n.SECTION_LOADING,{data:gb,scrubberKey:this.scrubberKey});this.loaded=true;i.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.node,'fbTimelineTimePeriodSuppressed');var hb='ProfileTimelineSectionPagelet',ib=this.scrubberKey==db.WAY_BACK;if(ib)hb='ProfileTimelineRemainingYearsPagelet';gb.time_cutoff=db.getTimeCutoff();gb.highlight_unit_data=eb;gb.parent_key=this.parentKey;gb.force_no_friend_activity=ta;i.addClass(this.node,'fbTimelineSectionLoading');if(gb.combine_sections)i.addClass(this.node,'combinedSections');if(this.canUnload&&ga){var jb=this.node.firstChild.cloneNode(true);i.hide(jb);j.insertAfter(this.node,jb);}else this.canScrollLoad=false;var kb=null;if(fb&&!mb){var lb=this.node;lb.style.minHeight=window.innerHeight+"px";kb=function(){lb.style.minHeight=null;};}var mb=gb.combine_sections&&ib;pa[this.scrubberKey]=s.loadFromEndpoint(hb,mb?gb.unit_container_id+'_left':this.node.id,gb,{usePipe:true,jsNonblock:true,constHeight:true,append:mb,finallyHandler:kb});cb(this.scrubberKey);},preload:function(){i.addClass(this.node,'fbTimelineTimePeriodSuppressed');i.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');var eb=j.find(this.node,'span.sectionLabel');if(eb.getAttribute('data-original-label')){j.setContent(eb,eb.getAttribute('data-original-label'));eb.removeAttribute('data-original-label');}},unload:function(){if(!this.loaded||!this.canUnload)return;this.loaded=false;pa[this.scrubberKey]&&pa[this.scrubberKey].cancel();i.addClass(this.node,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.node,'fbTimelineTimePeriodSuppressed');if(this.node.nextSibling&&i.hasClass(this.node.nextSibling,'fbTimelineSection')){j.setContent(this.node,this.node.nextSibling);i.show(this.node.firstChild);}else j.empty(this.node);this.deactivateScrollLoad();},activateScrollLoad:function(){this.canScrollLoad=true;i.removeClass(this.node,'fbTimelineTimePeriodSuppressed');i.addClass(this.node,'fbTimelineTimePeriodUnexpanded');oa[this.scrubberKey]&&oa[this.scrubberKey].reset();},deactivateScrollLoad:function(){if(!this.loaded){this.canScrollLoad=false;i.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');i.addClass(this.node,'fbTimelineTimePeriodSuppressed');oa[this.scrubberKey]&&oa[this.scrubberKey].remove();}},setExpandLoadData:function(eb){this._expandPageletLoadData=eb;return this;},appendData:function(eb){x(this._pageleLoadData,eb);return this;},expandSubSections:function(){if(this.subSections.length)db.navigateToSection(this.subSections[0].scrubberKey);},expand:function(eb){if(!this.loaded)return;sa.add_event('expand_'+this.scrubberKey);var fb=j.find(this.node,'.fbTimelineSectionExpander');i.addClass(fb.firstChild,'async_saving');eb&&i.addClass(eb,'async_saving');this._expandPageletLoadData.time_cutoff=db.getTimeCutoff();db.navigateToSection(this.scrubberKey);j.scry(this.node,'.fbTimelineCapsule').forEach(j.remove);this._expandPageletLoadData.new_expand=true;pa[this.scrubberKey]&&pa[this.scrubberKey].cancel();pa[this.scrubberKey]=s.loadFromEndpoint('ProfileTimelineSectionPagelet',fb.id,this._expandPageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true});},isPermalinkPeriod:function(){return this._pageletLoadData.is_permalink_period;}});function wa(){if(fa)return;o.register(o.CONTENT,db);sa=ea('timeline').uai('init','scrubber',false);fa=true;if(t.ie()<=7)ga=true;}var xa=aa(function(eb,fb,gb){var hb=p.get(eb).historicUnitCount;fb-=hb;gb-=1;if(hb==-1||gb<=0||fb<0)return;var ib=db.getNextSectionKey(eb);if(ib){p.get(ib).load();xa(ib,fb,gb);}},500);function ya(eb,fb,gb,hb){var ib=db.getNextSectionKey(fb);if(ib){oa[ib]=new l(eb,za.curry(ib,eb),false,gb||1000);}else if(fb!==db.WAY_BACK){hb=hb?hb:0;if(hb>80)return null;ya.curry(eb,fb,gb,hb+1).defer(250);}}function za(eb,fb){var gb=p.get(eb);if(gb&&gb.canScrollLoad){sa.add_event("scroll_load_"+eb);if(ga){gb.preload();}else{gb.load();if(ua)xa(eb,ua.required_units,ua.max_parallelism);}fb&&j.remove(fb);}}function ab(){var eb,fb,gb=false;for(var hb=0;hb<ka.length;hb++){var ib=ka[hb];if(!ib)continue;var jb=p.get(ib);if(jb&&(jb.canScrollLoad||jb.loaded)){if(!jb.loaded){i.removeClass(jb.node,'fbTimelineTimePeriodSuppressed');i.addClass(jb.node,'fbTimelineTimePeriodUnexpanded');}if(eb&&fb){bb(eb,fb);if(gb)eb.deactivateScrollLoad();gb=true;}eb=null;fb=null;continue;}else if(eb){fb=jb;jb.deactivateScrollLoad();}else{eb=jb;if(gb)jb.activateScrollLoad();}i.removeClass(jb.node,'fbTimelineTimePeriodSuppressed');i.addClass(jb.node,'fbTimelineTimePeriodUnexpanded');}}function bb(eb,fb){i.removeClass(fb.node,'fbTimelineTimePeriodUnexpanded');i.addClass(fb.node,'fbTimelineTimePeriodSuppressed');var gb=j.find(eb.node,'span.sectionLabel'),hb=j.find(fb.node,'span.sectionLabel');if(!hb.getAttribute('data-original-label'))hb.setAttribute('data-original-label',j.getText(hb));if(gb.getAttribute('data-month')&&hb.getAttribute('data-month')&&gb.getAttribute('data-year')==hb.getAttribute('data-year')){j.setContent(hb,da._("Show {month1} - {month2} {year}",{month1:hb.getAttribute('data-month'),month2:gb.getAttribute('data-month'),year:gb.getAttribute('data-year')}));}else if(gb.getAttribute('data-year')!==hb.getAttribute('data-year')){j.setContent(hb,da._("Show {year1} - {year2}",{year1:hb.getAttribute('data-year'),year2:gb.getAttribute('data-year')}));}else j.setContent(hb,da._("Show {year}",{year:hb.getAttribute('data-year')}));}function cb(eb){if(ga)for(var fb=0;fb<ka.length-1;fb++){var gb=ka[fb];if(!gb)continue;if(gb!=eb){var hb=p.get(gb);if(hb.loaded&&hb.canUnload)hb.unload();}}ab();}var db={WAY_BACK:'way_back',RECENT:'recent',HEADER_SCROLL_CUTOFF:80,CURRENT_SECTION_OFFSET:150,FOOTER_HEIGHT:60,registerTimePeriod:function(eb,fb,gb,hb,ib,jb,kb){wa();if(w(ma,fb))return;if(la)x(gb,la);var lb=new va(eb,fb,gb,hb,kb);if(!ib){ka[jb]=fb;ja[fb]=true;}else{lb.parentKey=ib;p.get(ib).subSections=p.get(ib).subSections||[];p.get(ib).subSections[jb]=lb;}p.set(fb,lb);db.checkCurrentSectionChange();h.inform(n.SECTION_REGISTERED,{scrubberKey:fb});},reset:function(){for(var eb in oa)oa[eb].remove();for(var fb in pa)pa[fb]&&pa[fb].cancel();for(var gb in qa){qa[gb].unsubscribe();delete qa[gb];}ha&&ha.unsubscribe();ha=null;p.removeAll();ia=null;ja={};ka=[];la=[];ma=[];na={};oa={};pa={};ra=null;sa=null;ta=false;fa=false;},checkCurrentSectionChange:function(){var eb=db.getCurrentSection(),fb=ia&&ia.scrubberKey;if(eb&&eb.scrubberKey!==fb&&!eb.isPermalinkPeriod()){ia=eb;var gb=eb.scrubberKey,hb=eb.parentKey;if(!hb){hb=gb;gb=null;}o.sectionHasChanged(hb,gb);}},setTimeCutoff:function(eb){ra=eb;},getTimeCutoff:function(){return ra;},setParallelLoadConfig:function(eb){ua=eb;},getCurrentSection:function(){var eb={},fb=p.getAll();for(var gb in fb){var hb=fb[gb];if(!hb.loaded||na[hb.scrubberKey])continue;var ib=u.getElementPosition(hb.node,'viewport').y;if(hb.scrubberKey=='recent')ib--;if(ib<db.CURRENT_SECTION_OFFSET)eb[ib]=hb;}var jb=Math.max.apply(null,Object.keys(eb)),kb=jb==-Infinity;if(!kb){return eb[jb];}else if(ka[0])return p.get(ka[0]);return null;},capsuleForCurrentSection:function(){var eb=db.getCurrentSection();return eb&&j.scry(eb.node,'.fbTimelineCapsule')[0];},enableScrollLoad:function(eb,fb,gb,hb){eb=v(eb);var ib=j.scry(eb.parentNode,'.fbTimelineCapsule')[0];if(!ib)return;if(gb===null){ya(eb,fb,hb);}else o.runOnceWhenSectionFullyLoaded(ya.curry(eb,fb,hb),fb,gb);},enableScrollLoadOnClick:function(eb,fb,gb){eb=v(eb);g.listen(eb,'click',function(hb){hb.prevent();db.enableScrollLoad(eb,fb,null,gb);});},expandSectionOnClick:function(eb,fb){g.listen(eb,'click',function(gb){gb.prevent();p.get(fb).expand();});},expandSubSectionsOnClick:function(eb,fb){g.listen(eb,'click',function(gb){gb.prevent();p.get(fb).expandSubSections();});},getNextSectionKey:function(eb){for(var fb=0;fb<ka.length-1;fb++)if(ka[fb]==eb){while(fb<ka.length-1&&!ka[fb+1])fb++;return ka[fb+1];}var gb=p.get(eb);if(!gb||!gb.parentKey)return;var hb=p.get(gb.parentKey);if(!hb)return;for(var ib=0;ib<hb.subSections.length-1;ib++)if(hb.subSections[ib].scrubberKey==eb)return hb.subSections[ib+1].scrubberKey;},hideSection:function(eb){var fb=p.get(eb);fb&&i.hide(j.find(fb.node,'.fbTimelineSection'));var gb=o.getCurrentScrubber();if(gb){var hb=o.getCurrentScrubber().getNav(eb);hb&&i.hide(hb);}var ib=o.getCurrentStickyHeaderNav();ib&&ib.removeTimePeriod(eb);na[eb]=true;},loadSectionOnClick:function(eb,fb){g.listen(eb,'click',function(gb){gb.prevent();p.get(fb).load();});},removeSection:function(eb){for(var fb in ka)if(ka[fb]==eb){ka[fb]=null;break;}p.remove(eb);delete ja[eb];if(eb in oa){oa[eb].remove();delete oa[eb];}var gb=o.getCurrentStickyHeaderNav();gb&&gb.removeTimePeriod(eb);ma.push(eb);},removeSectionParent:function(eb){j.remove(v(eb).parentNode);},navigateToSection:function(eb,fb,gb){sa.add_event("nav_"+eb);fb=!!fb;var hb=eb,ib=p.get(eb);if(!ib)return;if(!ib.loaded){q.enable();j.scry(v('timeline_tab_content'),'.fbTimelineShowOlderSections').forEach(j.remove);}if(!ja[eb]){ib.node.style.minHeight=u.getViewportDimensions().y+'px';var jb=h.subscribe(n.SECTION_FULLY_LOADED,function(rb,sb){if(sb.scrubberKey===eb){ib.node.style.minHeight='';jb.unsubscribe();}});hb=ib.parentKey;var kb=p.get(hb).node;if(!i.hasClass(kb,'fbTimelineSectionExpanded')){k.scrollTo(kb,0);i.addClass(kb,'fbTimelineSectionExpanded');j.scry(kb,'.fbTimelineCapsule').forEach(j.remove);j.scry(kb,'div.fbTimelineSectionExpandPager').forEach(j.remove);j.scry(kb,'div.fbTimelineContentHeader').forEach(j.remove);j.scry(kb,"._5vf").forEach(function(rb){if(!rb.getAttribute('data-subsection'))j.remove(rb);});}var lb=db.getNextSectionKey(hb);if(lb&&oa[lb])oa[lb].setBuffer(0);}for(var mb=0;mb<ka.length;mb++){var nb=ka[mb];if(!nb)continue;if(nb==hb)break;p.get(nb).deactivateScrollLoad();j.scry(v('timeline_tab_content'),'.fbTimelineSectionExpandPager').forEach(function(rb){var sb=m.getInstance(rb.id);sb&&sb.removeOnVisible();});}db.adjustContentPadding();ib.load(gb,true);ab();var ob=u.getScrollPosition().x,pb=u.getElementPosition(ib.node).y;if(!fb){var qb=ja[eb]?n.SCROLL_TO_OFFSET:n.SUBSECTION_SCROLL_TO_OFFSET;k.scrollTo(new u(ob,pb-qb,'document'),true,false,false,function(){var rb=u.getElementPosition(ib.node).y;k.scrollTo(new u(ob,rb-qb,'document'),false);var sb=j.scry(ib.node,'h3.uiHeaderTitle')[0];if(sb){sb.tabIndex=0;sb.focus();}});}},adjustContentPadding:function(){var eb=ba('timeline_tab_content');if(!eb)return;if(o.isOneColumnMinimal())return;var fb=o.getCurrentKey()||r.TIMELINE_KEY;if(fb!==r.TIMELINE_KEY)return;var gb=ka.length-1,hb=p.get(ka[gb]);eb.style.paddingBottom=hb&&hb.loaded?null:u.getViewportDimensions().y-db.CURRENT_SECTION_OFFSET-db.HEADER_SCROLL_CUTOFF-db.FOOTER_HEIGHT+'px';},adjustContentPaddingAfterLoad:function(eb,fb){o.runOnceWhenSectionFullyLoaded(db.adjustContentPadding,eb,fb);},appendContentAfterLoad:function(eb,fb,gb){o.runOnceWhenSectionFullyLoaded(j.appendContent.curry(v(eb),fb),gb,'0');},markSectionAsLoaded:function(eb,fb,gb){o.runOnceWhenSectionFullyLoaded(function(){ba(eb)&&i.removeClass(v(eb).parentNode,'fbTimelineSectionLoading');},fb,gb);},suppressSectionsAbove:function(eb){var fb,gb;for(var hb=0;hb<ka.length;hb++){var ib=ka[hb];if(!ib)continue;fb=p.get(ib).node;gb=null;if(y(eb.parentNode.children).indexOf(eb)<=y(fb.parentNode.children).indexOf(fb)){gb=ib;break;}p.get(ib).deactivateScrollLoad();}if(gb)db.navigateToSection(gb,true);},forceNoFriendActivity:function(){ta=true;},removeDupes:function(eb){var fb=ba(eb);if(!fb)return;var gb=j.scry(fb,'li.fbTimelineUnit'),hb={};for(var ib=0;ib<gb.length;ib++){var jb=gb[ib];if(jb.id&&ca(jb.id,'tl_unit_')){var kb=jb.id.substring(8,jb.id.length),lb=(jb.getAttribute('data-unit')=='ExperienceSummaryUnit'?jb.getAttribute('data-time'):1);if(hb.hasOwnProperty(kb)&&hb[kb]==lb){jb.id='dupe_unit_'+Math.random();jb.className="hidden_elem";}else hb[kb]=lb;}}},removeLoadingState:function(eb){ba(eb)&&i.removeClass(v(eb),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(eb,fb){var gb=p.get(eb);gb&&gb.setExpandLoadData(fb);},appendSectionDataForAllSections:function(eb){la=eb;for(var fb=0;fb<ka.length-1;fb++){var gb=ka[fb];if(!gb)continue;var hb=p.get(gb);hb&&hb.appendData(eb);}},updatePagerAfterLoad:function(eb,fb,gb,hb,ib){var jb=m.getInstance(eb.firstChild.id);if(!jb){qa[eb.firstChild.id]=h.subscribe(m.REGISTERED,function(kb,lb){qa[eb.firstChild.id].unsubscribe();delete qa[eb.firstChild.id];if(lb.id===eb.firstChild.id)db.updatePagerAfterLoad(eb,fb,gb,hb,ib);});return;}o.runOnceWhenSectionFullyLoaded(function(){i.removeClass(eb,'fbTimelineHiddenPager');jb.checkBuffer();},gb,hb);if(ib)o.runOnceWhenSectionFullyLoaded(o.adjustScrollingPagerBuffer.curry(eb.firstChild.id,fb),gb,hb);},showAfterLoad:function(eb,fb,gb){o.runOnceWhenSectionFullyLoaded(function(){var hb=ba(eb);hb&&i.show(hb);},fb,gb);},repositionDialog:function(eb){h.subscribe(n.SECTION_LOADED,function(){eb.updatePosition();});},rightColumnFinished:function(eb){var fb=p.get(eb);fb.rightColumnFinished=true;},registerUnrankedGroup:function(eb){g.listen(eb,'click',function(event){var fb=j.find(eb,'.unranked_group_placeholder');if(event.getTarget()!==fb)return event.prevent();j.remove(fb);i.removeClass(j.find(eb,'.unranked_group_units'),'hidden_elem');return true;});}};e.exports=db;});
__d("TimelineLogging",["TimelineController","reportData"],function(a,b,c,d,e,f){var g=b('TimelineController'),h=b('reportData'),i=false,j=0,k=null,l=null,m={init:function(n){if(i)return;j=n;g.register(g.LOGGING,this);},reset:function(){i=false;j=0;k=null;},log:function(n,o){o.profile_id=j;h(n,{gt:o});},logSectionChange:function(n,o){var p={timeline_section_change:1,key:n};if(k&&n==k){p.timeline_scrubber=1;k=null;}if(l&&n==l){p.sticky_header_nav=1;l=null;}m.log('timeline',p);},logScrubberClick:function(n){k=n;},logStickyHeaderNavClick:function(n){l=n;}};e.exports=m;});
__d("TimelineSideAds",["function-extensions","Arbiter","CSS","DOM","EgoAdsObjectSet","Event","StickyController","TimelineConstants","TimelineController","UIPagelet","URI","Vector","cx","csx","debounce","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('EgoAdsObjectSet'),k=b('Event'),l=b('StickyController'),m=b('TimelineConstants'),n=b('TimelineController'),o=b('UIPagelet'),p=b('URI'),q=b('Vector'),r=b('cx'),s=b('csx'),t=b('debounce'),u=b('ge'),v=3,w=4,x=75,y='data-height',z=30000,aa=0,ba=false,ca,da,ea,fa,ga,ha=new j(),ia,ja=false,ka,la=Infinity,ma=5,na=false,oa,pa,qa,ra,sa,ta,ua=false,va=[],wa;function xa(ub,vb,wb){var xb=0;if(vb)xb+=vb.getHeight();if(!cb()&&!xb)return;ub-=xb;var yb=0;for(var zb=0;zb<wb;zb++)yb+=lb(zb);if(vb)if(ub<yb){ub+=vb.fold(yb-ub);}else if(ub>yb)ub-=vb.unfold(ub-yb);return ub;}function ya(){var ub=da.cloneNode(true);ub.id='';var vb=new j();vb.init(i.scry(ub,'div.ego_unit'));var wb=true;vb.forEach(function(xb){if(wb){wb=false;}else i.remove(xb);});h.addClass(ub,'fixed_elem');return ub;}function za(){ga=undefined;if(!n.pageHasScrubber(ia)){db(ma);gb();}else if(pa){eb(da,false);var ub=qa;qa&&i.remove(qa);qa=ya();if(ub)rb();db(n.sidebarInitialized()&&ja?w:v);gb();if(!ka){var vb=n.getCurrentScrubber();if(vb)qb(vb.getRoot(),vb.getOffset());}ka&&ka.start();}else tb.adjustAdsToFit();}function ab(){if(qa){i.remove(qa);qa=null;}if(ka){ka.stop();ka=null;}if(cb()){h.conditionClass(da,'fixed_elem',!pa);h.conditionClass(da,"_22s",!n.pageHasScrubber(ia));}else h.conditionClass(da,'fixed_elem',!pa&&n.pageHasScrubber(ia));}function bb(ub){var vb=q.getViewportDimensions().y,wb=n.getCurrentScrubber(),xb=wb?wb.getOffset():m.SCRUBBER_DEFAULT_OFFSET,yb=vb-xb-x;if(wb||cb())return xa(yb,wb,ub);}function cb(){return n.fixedAds();}function db(ub){fa=Math.min(ub,ha.getCount());ha.forEach(function(vb,wb){eb(vb,wb>=fa);});eb(da,fa===0);}function eb(ub,vb){h.conditionClass(ub,"_22r",vb);ub.setAttribute('aria-hidden',vb?'true':'false');}function fb(ub){var vb=i.find(ha.getUnit(ub),"div._4u8"),wb=vb.getAttribute('data-ad');return JSON.parse(wb).adid;}function gb(){ib();hb();}function hb(){var ub;if(ga!==undefined){ub=ha.getHoldoutAdIDsForSpace(ga,mb);}else ub=ha.getHoldoutAdIDsForNumAds(fa);if(ub)ub.forEach(jb);}function ib(){if(!ra)return;for(var ub=fa-1;ub>=0;--ub){if(ka&&ka.isFixed()&&((ub!==0)||(qa&&!h.shown(qa))))continue;var vb=fb(ub);if(!ra[vb])return;jb(vb);}}function jb(ub){if(!ra[ub])return;var vb=i.create('iframe',{src:p('/ai.php').addQueryData({aed:ra[ub]}),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});vb.setAttribute('aria-hidden','true');i.appendContent(da,vb);delete ra[ub];}function kb(ub){var vb=0;while(ub>0&&vb<ma){ub-=lb(vb);if(ub>=0)vb++;}return vb;}function lb(ub){var vb=ha.getUnit(ub);if(!vb)return 0;return mb(vb);}function mb(ub){if(!ub.getAttribute(y))nb(ub);return parseInt(ub.getAttribute(y),10);}function nb(ub){ub.setAttribute(y,ub.offsetHeight);}function ob(){for(var ub=0;ub<ha.getCount();ub++){var vb=ha.getUnit(ub);if(!vb)continue;nb(vb);}}function pb(){var ub=i.scry(da,'div.ego_unit');ha.init(ub);var vb=ub.length;if(!vb)return;h.addClass(ha.getUnit(0),'ego_unit_no_top_border');na=vb;za();var wb=function(xb){nb(xb);na=--vb;tb.adjustAdsToFit();if(!na)la=Date.now();};ub.forEach(function(xb){function yb(){wb.curry(xb).defer();}var zb=i.scry(xb,'img.img')[0];if(!zb)return;if(zb.complete){yb();}else k.listen(zb,{load:yb,error:yb,abort:yb});});}function qb(ub,vb){ka=new l(ub,vb,function(wb){if(wb){rb();}else{i.remove(qa);gb();}});if(qa)ka.start();}function rb(){i.insertAfter(da,qa);sb();}function sb(){h.conditionShow(qa,lb(0)<=bb(1)&&!h.hasClass(document.documentElement,'tinyViewport'));}var tb={init:function(ub,vb,wb){if(ba)return;ma=wb.max_ads;ca=wb.refresh_delay;z=wb.refresh_threshold;ba=true;ea=vb;da=ub;tb.adjustAdsType(n.shouldShowWideAds());sa=g.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive','Curation/Action','ProfileBrowser/LoadMoreContent','Ads/NewContentDisplayed'],tb.loadAdsIfEnoughTimePassed);ta=g.subscribe('TimelineSideAds/refresh',tb.forceReloadAds);wa=t(tb.loadAdsIfEnoughTimePassed,ca,this,true);if(wb.mouse_move){va.push(k.listen(window,'mousemove',wa));va.push(k.listen(window,'scroll',wa));va.push(k.listen(window,'resize',wa));}n.register(n.ADS,tb);},setShortMode:function(ub){pa=ub;},start:function(ub){ra=ub;oa=null;pb();},updateCurrentKey:function(ub){if(ub==ia)return;ia=ub;ab();},loadAds:function(ub){if(na||oa)return;la=Infinity;oa=o.loadFromEndpoint('WebEgoPane',da.id,{pid:33,data:[ea,'timeline_'+ub,pa?w:ma,++aa,false]},{crossPage:true,bundle:false});},registerScrubber:function(ub){if(pa)qb(ub.getRoot(),ub.getOffset());!oa&&tb.adjustAdsToFit();},loadAdsIfEnoughTimePassed:function(){if(z&&(Date.now()-la>=z)&&!h.hasClass(document.documentElement,'tinyViewport')&&(!ka||ka.isFixed())&&(!ra||!ra[fb(0)]))tb.loadAds(ia);tb.adjustAdsToFit();},forceReloadAds:function(){tb.loadAds(ia);},adjustAdsType:function(ub){if(ub!=ja){h.conditionClass(da,"_22q",!ub);h.conditionClass(da,"_35q",!ub);qa&&h.conditionClass(qa,"_22q",!ub);qa&&h.conditionClass(qa,"_35q",!ub);ja=ub;ob();tb.adjustAdsToFit();var vb=u('rightColContent');if(vb)h.conditionClass(vb,'fbTimelineWideRightCol',ub);}},adjustAdsToFit:function(){if(!da||ua)return;ua=true;var ub=ja?w:v;if(pa){if(ka&&qa){ka.handleScroll();if(ka.isFixed()){h.conditionShow(qa,lb(0)<=bb(1)&&!h.hasClass(document.documentElement,'tinyViewport'));}else db(ub);gb();}}else{var vb=bb(ub);if(typeof vb!=='undefined'){ga=vb;db(kb(vb));if(!na)gb();}}ua=false;},reset:function(){ka&&ka.stop();oa&&oa.cancel();ha=new j();ja=false;da=null;ka=null;oa=null;aa=0;na=null;pa=null;qa=null;ia=null;la=Infinity;ba=false;sa&&g.unsubscribe(sa);sa=null;ta&&g.unsubscribe(ta);ta=null;va.forEach(function(ub){ub.remove();});va=[];wa&&wa.reset();}};e.exports=a.TimelineSideAds||tb;});
__d("TimelineStickyHeader",["Animation","Arbiter","Bootloader","CSS","DOM","Style","TimelineController","TimelineURI","Vector","ViewportBounds","$","ge","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('DOM'),l=b('Style'),m=b('TimelineController'),n=b('TimelineURI'),o=b('Vector'),p=b('ViewportBounds'),q=b('$'),r=b('ge'),s=b('queryThenMutateDOM'),t=200,u=false,v=false,w,x,y,z,aa,ba,ca={},da={VISIBLE:'TimelineStickyHeader/visible',ADJUST_WIDTH:'TimelineStickyHeader/adjustWidth',init:function(ea){if(u)return;u=true;w=ea;x=k.find(ea,'div.name');y=k.find(ea,'div.actions');v=j.hasClass(ea,'fbTimelineStickyHeaderVisible');var fa=q('blueBar'),ga,ha=false;s(function(){if(fa.offsetTop&&!r('page_admin_panel')&&m.getCurrentKey()!==n.TIMELINE_KEY){ga=o.getElementDimensions(fa).y;ha=true;}},function(){if(ha){i.loadModules(['StickyController'],function(ia){new ia(ea,ga).start();});}else j.addClass(ea,'fixed_elem');s(function(){aa=ea.offsetTop;ba=ea.scrollHeight;},function(){z=p.addTop(function(){return v?aa+ba:0;});},'TimelineStickyHeader/init');m.register(m.STICKY_HEADER,da);},'TimelineStickyHeader/init');},reset:function(){u=false;v=false;w=null;x=null;y=null;ca={};z.remove();z=null;},toggle:function(ea){if(ea!==v){var fa=ea?aa-ba:aa,ga=ea?aa:aa-ba;l.set(w,'top',fa+'px');j.addClass(w,'fbTimelineStickyHeaderAnimating');var ha=k.getID(w);ca[ha]&&ca[ha].stop();ca[ha]=new g(w).from('top',fa).to('top',ga).duration(t).ondone(function(){ca[ha]=null;j.conditionClass(w,'fbTimelineStickyHeaderHidden',!ea);w.setAttribute('aria-hidden',ea?'false':'true');j.removeClass(w,'fbTimelineStickyHeaderAnimating');l.set(w,'top','');h.inform(da.VISIBLE,ea);}).go();v=ea;}},adjustWidth:function(){h.inform(da.ADJUST_WIDTH,x,h.BEHAVIOR_STATE);},getRoot:function(){return w;},setActions:function(ea){if(u&&ea){k.setContent(y,ea);y=ea;}}};e.exports=a.TimelineStickyHeader||da;});
__d("ButtonGroup",["function-extensions","copyProperties","createArrayFrom","CSS","DataStore","Parent"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('createArrayFrom'),i=b('CSS'),j=b('DataStore'),k=b('Parent'),l='firstItem',m='lastItem';function n(s,t){var u=k.byClass(s,t);if(!u)throw new Error('invalid use case');return u;}function o(s){return i.shown(s)&&h(s.childNodes).some(i.shown);}function p(s){var t,u,v;h(s.childNodes).forEach(function(w){v=o(w);i.removeClass(w,l);i.removeClass(w,m);i.conditionShow(w,v);if(v){t=t||w;u=w;}});t&&i.addClass(t,l);u&&i.addClass(u,m);i.conditionShow(s,t);}function q(s,t){var u=n(t,'uiButtonGroupItem');s(u);p(u.parentNode);}function r(s){this._root=n(s,'uiButtonGroup');j.set(this._root,'ButtonGroup',this);p(this._root);}r.getInstance=function(s){var t=n(s,'uiButtonGroup'),u=j.get(t,'ButtonGroup');return u||new r(t);};g(r.prototype,{hideItem:q.curry(i.hide),showItem:q.curry(i.show),toggleItem:q.curry(i.toggle)});e.exports=r;});
__d("TimelineStickyHeaderNav",["Event","function-extensions","Arbiter","ButtonGroup","CSS","DOM","Parent","SelectorDeprecated","Style","SubscriptionsHandler","TimelineConstants","TimelineController","TimelineLegacySections","URI","UserAgent","Vector","ge","tx"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('ButtonGroup'),j=b('CSS'),k=b('DOM'),l=b('Parent'),m=b('SelectorDeprecated'),n=b('Style'),o=b('SubscriptionsHandler'),p=b('TimelineConstants'),q=b('TimelineController'),r=b('TimelineLegacySections'),s=b('URI'),t=b('UserAgent'),u=b('Vector'),v=b('ge'),w=b('tx'),x=false,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja={},ka={},la=[],ma=false,na=[],oa=[],pa,qa=["January","February","March","April","May","June","July","August","September","October","November","December"];function ra(){var fb=m.getSelectorMenu(da);pa.addSubscriptions(g.listen(fb,'click',sa),h.subscribe(p.SECTION_LOADED,wa));}function sa(event){var fb=l.byTag(event.getTarget(),'a');if(fb){var gb=fb.getAttribute('data-key');q.stickyHeaderNavWasClicked(gb);q.navigateToSection(gb);event.prevent();}}function ta(fb,gb){var hb=m.getValue(gb);if(hb==='allStories')r.get(fb).expandSubSections();if(hb!=='activityLog')ua(gb);}function ua(fb){db(fb,'highlights');db(fb,'allStories');var gb=k.find(fb,'li.separator');j.conditionShow(gb,gb.previousSibling);}function va(fb){if(ga[fb]&&!z.custom_subsection_menu){ab(fb);}else xa();q.adjustStickyHeaderWidth();}function wa(fb,gb){var hb=gb.key;if(ha[hb]){bb(hb);va(hb);}}function xa(){ba.hideItem(ea);}function ya(fb){var gb=fb.split('_');return qa[gb.pop()-1];}function za(fb){var gb=fa[fb],hb=ga[fb];if(!gb&&hb){gb=fa[fb]=ea.cloneNode(true);var ib=k.scry(gb,'li.activityLog a')[0];if(ib)ib.href=s(ib.href).addQueryData({key:fb});var jb=q.getCurrentScrubber();if(hb.length)j.show(k.find(gb,'li.separator'));for(var kb=0;kb<hb.length;kb++){var lb=hb[kb].scrubberKey,mb=jb?jb.getLabelForSubnav(hb[kb].parentKey,lb):mb=ya(lb);if(mb)cb(gb,{key:lb,label:mb});}pa.addSubscriptions(m.listen(gb,'change',ta.curry(fb,gb)),g.listen(gb,'click',sa));}return gb;}function ab(fb){var gb=za(fb);k.insertAfter(ea,gb);j.hide(ea);for(var hb in fa){var ib=fa[hb];j.conditionShow(ib,ib===gb);}ba.showItem(ea);}function bb(fb){ga[fb]=r.get(fb).subSections;}function cb(fb,gb){var hb=k.create('a',{href:'#',rel:'ignore',className:'itemAnchor',tabIndex:0},k.create('span',{className:'itemLabel fsm'},gb.label));hb.setAttribute('data-key',gb.key);hb.setAttribute('aria-checked',false);var ib=k.create('li',{className:'uiMenuItem uiMenuItemRadio uiSelectorOption'},hb);ib.setAttribute('data-label',gb.label);var jb=k.find(fb,'ul.uiMenuInner'),kb=k.create('option',{value:gb.key},gb.label),lb=k.find(fb,'select');if(gb.key==='recent'){k.prependContent(jb,ib);k.insertAfter(lb.options[0],kb);}else{k.appendContent(jb,ib);k.appendContent(lb,kb);}}function db(fb,gb){var hb=k.scry(fb,'li.uiMenuItem');if(!hb)return;for(var ib=0;ib<hb.length;ib++){var jb=hb[ib];if(j.hasClass(jb,gb)||jb.firstChild.getAttribute('data-key')==gb){k.remove(jb);break;}}var kb=k.find(fb,'select'),lb=k.scry(kb,'option');for(ib=0;ib<lb.length;ib++)if(lb[ib].value===gb){k.remove(lb[ib]);return;}}var eb={init:function(fb,gb){if(x)return;x=true;y=fb;z=gb||{};ca=k.find(y,'div.pageMenu');da=k.find(y,'div.sectionMenu');ea=k.find(y,'div.subsectionMenu');ia=k.find(ca,'li.uiMenuSeparator');ba=i.getInstance(ca);pa=new o();fa={};ga={};ha={};eb.adjustMenuHeights();ra();q.register(q.STICKY_HEADER_NAV,eb);oa.forEach(function(hb){hb();});},reset:function(){x=false;z={};la=[];ja={};ka={};ma=false;na=[];y=null;ca=null;da=null;ea=null;ia=null;fa={};ga={};ha={};pa.release();},addTimePeriod:function(fb){var gb=q.getCurrentScrubber();if(!gb)return;var hb=gb.getLabelForNav(fb);if(!hb)return;cb(da,{key:fb,label:hb});var ib=k.find(da,'ul.uiMenuInner');if(fb==='recent'||ib.children.length<2)m.setSelected(da,fb,true);},updateSection:function(fb,gb){if(gb){var hb=za(fb);if(hb){m.setSelected(hb,gb);ua(hb);}else aa=fb;}else{ha[fb]=true;bb(fb);}m.setSelected(da,fb,true);va(fb);},adjustMenuHeights:function(){if(t.ie()<=7)return;[ca,da].forEach(function(fb){var gb='';if(!j.hasClass(document.documentElement,'tinyViewport')){gb=u.getViewportDimensions().y-u.getElementDimensions(v('blueBar')).y-80;gb+='px';}n.set(k.find(fb,'ul.uiMenuInner'),'maxHeight',gb);});},initPageMenu:function(fb,gb){if(!x){oa.push(eb.initPageMenu.curry(fb,gb));return;}function hb(ib,jb){ib.forEach(function(kb){var lb=ka[kb]=k.create('li');j.hide(lb);jb?k.insertBefore(ia,lb):k.appendContent(k.find(ca,'ul.uiMenuInner'),lb);});}hb(fb,true);hb(gb,false);ja.info=k.scry(ca,'li')[0];la=gb;ma=true;if(na.length)na.forEach(function(ib){eb.registerPageMenuItem(ib.key,ib.item);});},registerPageMenuItem:function(fb,gb){if(!ma){na.push({key:fb,item:gb});return;}if(ka[fb]){k.replace(ka[fb],gb);ja[fb]=gb;delete ka[fb];if(la.indexOf(fb)>=0)j.show(ia);}},removeTimePeriod:function(fb){db(da,fb);}};e.exports=eb;});
__d("TimelineSpinelessComposer",["Arbiter","Bootloader","CSS","DOM","Parent","Run","TimelineComposer","TimelineComposerUtilities","csx","cx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Run'),m=b('TimelineComposer'),n=b('TimelineComposerUtilities'),o=b('csx'),p=b('cx'),q;function r(w){if(w.isScheduledPost||w.isOGPost)return;if(!w.streamStory){window.location.reload();return;}if(w.backdatedTime){h.loadModules(['TimelineStoryPublisher'],function(x){x.publish(w);});return;}m.renderCapsuleBasedStory(q,w.streamStory);}function s(){return j.find(k.byClass(q,'fbTimelineComposerCapsule'),"div._4s3");}function t(w){var x=u();i.show(x);var y=w.subscribe('hide',function(){i.hide(x);w.unsubscribe(y);});}function u(){var w=k.byClass(q,'fbTimelineComposerCapsule'),x=j.scry(w,'div.composerVeil');if(x.length!==1)x=j.appendContent(w,j.create('div',{className:'composerVeil hidden_elem'}));return x[0];}var v={init:function(w){q=w;var x=g.subscribe('composer/publish',function(event,y){if(y.composer_id===q.id)r(y);});l.onLeave(x.unsubscribe.bind(x));if(i.hasClass(q,"_mj")){n.hidePlaceIfAttachmentsTooTall(q);}else n.hidePlaceIfAttachmentsTooTallOld(q);},showMLEFlyout:function(w){w.setContext(s()).show();t(w);}};e.exports=v;});
__d("TimelineScrubber",["Event","CSS","DOM","Focus","Keys","Parent","TimelineController","Vector","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('DOM'),j=b('Focus'),k=b('Keys'),l=b('Parent'),m=b('TimelineController'),n=b('Vector'),o=b('copyProperties');function p(q){this._root=q;this._navKeys={};this._subNavKeys={};this._rollups={};this._rolledup={};var r=q.childNodes;this._currentNav=r[0];for(var s=0;s<r.length;s++){var t=r[s].getAttribute('data-key');this._navKeys[t]=r[s];var u=i.scry(r[s],'ul');this._subNavKeys[t]={};if(u.length){var v=u[0].childNodes;for(var w=0;w<v.length;w++)this._subNavKeys[t][v[w].getAttribute('data-key')]=v[w];}var x=r[s].getAttribute('data-rollup');if(x){this._rollups[x]=this._rollups[x]||[];this._rollups[x].push(r[s]);}}this._clickListener=g.listen(this._root,'click',this._handleScrub.bind(this));this._focusHandler=g.listen(this._root,'keydown',this._moveFocus.bind(this));this._tabbableElement=i.scry(this._root,'a')[0];h.show(this._root);var y=n.getViewportDimensions().y-this.SCRUBBER_NO_ADS_VERTICAL_BUFFER,z=this.getHeight();if(z>y)this.fold(z-y);m.register(m.SCRUBBER,this);m.scrubberHasLoaded(this);}o(p.prototype,{KEY_HEIGHT:23,SUBKEY_HEIGHT:16,OFFSET:38,SCRUBBER_NO_ADS_VERTICAL_BUFFER:125,reset:function(){this._root=null;this._navKeys={};this._subNavKeys={};this._rollups={};this._rolledup={};},getRoot:function(){return this._root;},getNav:function(q){return this._navKeys[q];},getSubnav:function(q,r){return this._subNavKeys[q][r];},getHeight:function(){return this._root.offsetHeight;},getLabelForNav:function(q){var r=this.getNav(q);return r&&i.getText(i.scry(r,'a')[0]);},getLabelForSubnav:function(q,r){var s=this.getSubnav(q,r);return s&&i.getText(i.scry(s,'a')[0]);},fold:function(q){return this._adjustFolding(q,true);},unfold:function(q){return this._adjustFolding(q,false);},getOffset:function(){return this.OFFSET+(h.hasClass(document.body,'hasVoiceBar')?26:0)+(h.hasClass('rightColContent','pagesTimelineRightColumn')?48:0);},updateSection:function(q,r){if(!this._navKeys[q])return;var s=this._navKeys[q].getAttribute('data-rollup');if(this._currentRollup&&this._currentRollup!=s){h.removeClass(this._currentRollup,'selected');h.removeClass(i.scry(this._currentRollup,'ul')[0],'loaded');delete this._currentRollup;}if(s&&this._rolledup[s]){var t=this._rolledup[s];if(t.getAttribute('data-rollup')){this._currentRollup=t;h.addClass(this._currentRollup,'selected');h.addClass(i.scry(this._currentRollup,'ul')[0],'loaded');}}this._currentNav&&h.removeClass(this._currentNav,'selected');this._currentSubNav&&h.removeClass(this._currentSubNav,'selected');this._currentNav=null;this._currentSubNav=null;if(this._navKeys[q]){this._currentNav=this._navKeys[q];h.addClass(this._currentNav,'selected');if(this.decadesAreSelectable&&this._navKeys[r]){this._currentSubNav=this._navKeys[r];h.addClass(this._currentSubNav,'selected');}else if(r&&this._subNavKeys[q][r]){this._currentSubNav=this._subNavKeys[q][r];h.addClass(this._currentSubNav,'selected');}}},_getRollupSize:function(q){var r=this._currentNav,s=r&&r.getAttribute('data-rollup'),t=this.KEY_HEIGHT*(this._rollups[q].length-1);if(q==s){t+=this.SUBKEY_HEIGHT*i.scry(r,'li').length;t-=this.SUBKEY_HEIGHT*(this._rollups[q].length-1);}return t;},_adjustFolding:function(q,r){var s=q,t=Object.keys(this._rollups);while(q>0&&t.length){var u=t[r?'pop':'shift']();if(!r==!this._rolledup[u])continue;var v=this._getRollupSize(u);if(v<=0)continue;if(!r&&v>q)break;this[r?'_collapseRollup':'_expandRollup'](u);q-=v;}return s-q;},_collapseRollup:function(q){var r=this._rollups[q];if(!r||r.length<2||this._rolledup[q])return;var s=r[0].previousSibling,t=r[0],u=i.create('a',{href:t.firstChild.href,rel:'ignore',tabindex:'-1'},[q]),v=i.create('ul',{className:'clearfix'});for(var w=0;w<r.length;w++)v.appendChild(r[w]);var x=i.create('li',null,[u,v]);if(this.decadesAreSelectable){var y=r[r.length-1],z=t.getAttribute('data-key')+y.getAttribute('data-key');x.setAttribute('data-start',y.getAttribute('data-start'));x.setAttribute('data-end',t.getAttribute('data-end'));x.setAttribute('data-key',z);this._navKeys[z]=x;}else x.setAttribute('data-key',t.getAttribute('data-key'));x.setAttribute('data-rollup',q);if(s){i.insertAfter(s,x);}else i.prependContent(this._root,x);this._rolledup[q]=x;this._checkSelection();this._ensureFocusableElementIsVisible();},_expandRollup:function(q){if(!this._rolledup[q])return;var r=this._rolledup[q],s=i.scry(r,'ul')[0],t=document.createDocumentFragment();while(s.childNodes.length)t.appendChild(s.firstChild);i.replace(r,t);this._rolledup[q]=false;this._checkSelection();},_checkSelection:function(){if(this._currentNav){var q=this._currentSubNav&&this._currentSubNav.getAttribute('data-key');this.updateSection(this._currentNav.getAttribute('data-key'),q);}},_handleScrub:function(event){var q=event.getModifiers();if(event.isMiddleClick()||q.access||q.meta)return true;var r=l.byTag(event.getTarget(),'a'),s=r&&l.byAttribute(r,'data-key');if(s){m.scrubberWasClicked(s.getAttribute('data-key'));m.navigateToSection(s.getAttribute('data-key'));return event.prevent();}},_ensureFocusableElementIsVisible:function(){while(!(this._tabbableElement.offsetHeight||this._tabbableElement.offsetWidth)){this._tabbableElement.tabIndex=-1;var q=l.byTag(l.byTag(this._tabbableElement,'li'),'li');this._tabbableElement=i.scry(q,'a')[0];this._tabbableElement.tabIndex=0;}},_moveFocus:function(event){if(event.getModifiers().any)return;var q=g.getKeyCode(event);if(q===k.UP||q===k.DOWN){var r=i.scry(this._root,'a').filter(function(u){return u.offsetHeight||u.offsetWidth;}),s=r.indexOf(this._tabbableElement);if(s!=-1){var t=r[s+(q===k.UP?-1:1)];if(t){t.tabindex=0;j.set(t);this._tabbableElement.tabindex=-1;this._tabbableElement=t;event.prevent();}}}}});e.exports=p;});
__d("TimelineMainScrubber",["Arbiter","Class","CSS","DOMQuery","TimelineConstants","TimelineController","TimelineScrubber","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('DOMQuery'),k=b('TimelineConstants'),l=b('TimelineController'),m=b('TimelineScrubber'),n=b('copyProperties');function o(p){this.parent.construct(this,p);this._subscribe=g.subscribe(k.SECTION_LOADED,function(q,r){var s=this._navKeys[r.key],t=s&&j.scry(s,'ul')[0];if(t){i.addClass(t,'loaded');l.scrubberHasChangedState();if(r.hideSubSections)i.hide(t);}}.bind(this));}h.extend(o,m);n(o.prototype,{reset:function(){this.parent.reset();this._subscribe&&this._subscribe.unsubscribe();}});e.exports=o;});
__d("legacy:TimelineMainScrubber",["TimelineMainScrubber"],function(a,b,c,d){a.TimelineMainScrubber=b('TimelineMainScrubber');},3);
__d("legacy:TimelineCover",["TimelineCover"],function(a,b,c,d){a.TimelineCover=b('TimelineCover');},3);
__d("legacy:ui-scrolling-pager-js",["ScrollingPager"],function(a,b,c,d){a.ScrollingPager=b('ScrollingPager');},3);
__d("legacy:LegacyContextualDialog",["LegacyContextualDialog"],function(a,b,c,d){a.LegacyContextualDialog=b('LegacyContextualDialog');},3);
__d("ButtonGroupMonitor",["ContextualDialog","ContextualLayer","CSS","Layer","Parent","SelectorDeprecated"],function(a,b,c,d,e,f){var g=b('ContextualDialog'),h=b('ContextualLayer'),i=b('CSS'),j=b('Layer'),k=b('Parent'),l=b('SelectorDeprecated');function m(n){var o=k.byClass(n,'bg_stat_elem')||k.byClass(n,'uiButtonGroup');o&&i.toggleClass(o,'uiButtonGroupActive');}j.subscribe(['hide','show'],function(n,o){if(o instanceof h||o instanceof g)m(o.getCausalElement());});l.subscribe(['close','open'],function(n,o){m(o.selector);});});
__d("SubMenu",["Event","Arbiter","copyProperties","CSS"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('copyProperties'),j=b('CSS');function k(){}i(k.prototype,{_subMenu:null,_mainMenu:null,_forward:null,_backward:null,init:function(l,m,n,o){this._subMenu=l;this._mainMenu=m;this._forward=n;this._backward=o;h.subscribe('SubMenu/Reset',this._goToMainMenu.bind(this));g.listen(n,'click',this._goToSubMenu.bind(this));g.listen(o,'click',this._goToMainMenu.bind(this));},initAsyncChildMenu:function(l){g.listen(this._forward,'click',function(){this._goToSubMenu();l.load();}.bind(this));},_goToMainMenu:function(){j.hide(this._subMenu);j.show(this._mainMenu);},_goToSubMenu:function(){j.hide(this._mainMenu);j.show(this._subMenu);}});e.exports=k;});
__d("legacy:ui-submenu",["SubMenu"],function(a,b,c,d){a.SubMenu=b('SubMenu');},3);
__d("AsyncMenu",["AsyncRequest","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('copyProperties'),i=b('emptyFunction');function j(k,l){this._uri=k;this._elem=l;}h(j.prototype,{_uri:null,_elem:null,load:function(){this.load=i;g.bootstrap(this._uri,this._elem);}});e.exports=j;});