/*!CK:1440728625!*//*1378844418,173209403*/

if (self.CavalryLogger) { CavalryLogger.start_js(["O5qSr"]); }

__d("TimelineCollectionsCuration",["getContextualParent","CSS","Parent","$","cx"],function(a,b,c,d,e,f){var g=b('getContextualParent'),h=b('CSS'),i=b('Parent'),j=b('$'),k=b('cx'),l={hideAppSection:function(m){var n=g(j(m),true),o=['getTimelineUnitFromChildElement','getMedleyAppSectionFromChildElement'];for(var p=0;p<o.length;p++){var q=l[o[p]](n);if(q)return h.hide(q);}},getTimelineUnitFromChildElement:function(m){return i.byClass(m,'fbTimelineUnit');},getMedleyAppSectionFromChildElement:function(m){return i.byClass(m,"_30f");}};e.exports=l;});
__d("OGCollectionAddToggle",["CSS","DOM","Event","TimelineCollectionsCuration","csx","cx","tidyEvent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Event'),j=b('TimelineCollectionsCuration'),k=b('csx'),l=b('cx'),m=b('tidyEvent'),n={},o="_4__4";function p(r,s,t){g.conditionShow(r,t);g.conditionClass(s,o,t);}var q={initTypeaheadToggleInReport:function(r,s,t){h.prependContent(h.find(j.getTimelineUnitFromChildElement(r),"._5amu"),s);if(n[t]===undefined){n[t]=g.hasClass(s,o);}else p(r,s,n[t]);m(i.listen(s,'click',function(u){p(r,s,n[t]=!n[t]);}));}};e.exports=q;});
__d("InlineFriendInviter",["Event","AsyncRequest","CSS","$","DOM","DataStore","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('AsyncRequest'),i=b('CSS'),j=b('$'),k=b('DOM'),l=b('DataStore'),m=b('ge'),n={init:function(o,p,q){g.listen(o,'click',function(event){i.addClass(q,'yellow');i.hide(q);});g.listen(p,'click',function(event){i.addClass(q,'yellow');i.hide(q);});},sendInvite:function(o,p,q,r,s){new h().setURI('/ajax/pages/invite/send_single/').setData({page_id:o,invitee:p,elem_id:q,action:r,ref:s}).send();i.addClass(q,'yellow');i.hide(k.find(j(q),'.button'));},setupScrollEvents:function(o,p,q,r){var s=k.find(o,'div.uiScrollableAreaWrap');g.listen(s,'scroll',function(event){this.onScrollEvent(o,p,q,r);}.bind(this));},onScrollEvent:function(o,p,q,r){var s=l.get(o,'ScrollableArea');if(s&&!s.requestPending&&!s.noMoreResults&&s.isScrolledToBottom()){s.requestPending=true;var t=m(o,'.uiMorePager'),u=k.find(o,'.inlineFriendInviterList'),v=u.getAttribute('meta');new h().setURI('/ajax/pages/invite/get.php').setData({pageID:p,offset:v,ref:q,is_admin:r}).setStatusElement(t).setHandler(this.onRequestFinished.bind(this,o)).setErrorHandler(this.onRequestFinished.bind(this,o)).send();}},onRequestFinished:function(o,p){var q=l.get(o,'ScrollableArea');q.requestPending=false;var r=p.getPayload();q.noMoreResults=r.noMoreResults;if(r.offset){var s=k.find(o,'.inlineFriendInviterList');s.setAttribute('meta',r.offset);}}};e.exports=n;});
__d("PlaceActionLink",["AsyncRequest","Dialog"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Dialog'),i={start_claim_link:function(j){var k=new g().setMethod('POST').setURI('/ajax/places/claim/start_claim.php').setData({id:j});new h().setAsync(k).show();return false;},refer_claim_link:function(j){var k=new g().setMethod('POST').setURI('/ajax/places/claim/refer_claim.php').setData({id:j});new h().setAsync(k).show();return false;}};e.exports=i;});
__d("legacy:place-action-link",["PlaceActionLink"],function(a,b,c,d){a.PlaceActionLink=b('PlaceActionLink');},3);
__d("PluginUITypeahead",["DOMDimensions","DOMPosition","DOMQuery","Tokenizer"],function(a,b,c,d,e,f){var g=b('DOMDimensions'),h=b('DOMPosition'),i=b('DOMQuery'),j=b('Tokenizer');function k(){return i.scry(document.body,'.uiTokenizer').map(function(m){var n=j.getInstance(m);if(!n)return {x:0,y:0};var o=n.getTypeahead().getView(),p=h.getElementPosition(o.getElement()),q=g.getElementDimensions(o.getElement());return {x:p.x+q.width,y:p.y+q.height};});}var l={width:function(){return Math.max.apply(null,k().map(function(m){return m.x;}));},height:function(){return Math.max.apply(null,k().map(function(m){return m.y;}));}};e.exports=l;});
__d("PluginSendFlyout",["Arbiter","DOMEvent","DOMEventListener","DOMQuery","Focus","Form","PluginResize","PluginSendX","PluginUITypeahead","Tokenizer","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DOMEvent'),i=b('DOMEventListener'),j=b('DOMQuery'),k=b("Focus"),l=b('Form'),m=b('PluginResize'),n=b('PluginSendX'),o=b('PluginUITypeahead'),p=b('Tokenizer'),q=b('copyProperties');function r(){}q(r,{init:function(s){var t=j.find(s,'.uiTokenizer'),u=j.find(s,'.textInput'),v=j.find(s,'.pluginSendFlyoutTextarea'),w=j.find(s,'form'),x=j.find(document.body,'.pluginSend'),y=j.find(w,'.pluginSendFlyoutCancelButton');function z(){p.getInstance(t).reset();v.value='';k.setWithoutOutline(x);g.inform(n.CLOSE);}i.add(w,'submit',function(aa){new h(aa).kill();l.bootstrap(w);});i.add(y,'click',function(aa){new h(aa).kill();z();});i.add(y,'keydown',function(aa){aa=new h(aa);var ba=aa.event.keyCode||aa.event.which;if(ba==9&&!aa.event.shiftKey){aa.preventDefault();k.set(u);}});i.add(u,'keydown',function(aa){aa=new h(aa);var ba=aa.event.keyCode||aa.event.which;if(ba==9&&aa.event.shiftKey){aa.preventDefault();if(u.getAttribute('aria-expanded')=='true'){u.setAttribute('aria-expanded','false');}else k.set(y);}});i.add(w,'keyup',function(aa){aa=new h(aa);var ba=aa.event.keyCode||aa.event.which;if(ba==27)z();});g.subscribe(n.SUCCESS,z);new m(function(){return Math.max(x.offsetWidth,s.offsetWidth,o.width());},function(){return Math.max(x.offsetHeight,s.offsetHeight+s.offsetTop,o.height());},'resize.iframe',false).resize().auto();}});e.exports=r;});
__d("TimelineCurationControl",["function-extensions","CSS","Parent","SelectorDeprecated"],function(a,b,c,d,e,f){b('function-extensions');var g=b('CSS'),h=b('Parent'),i=b('SelectorDeprecated');i.subscribe('open',function(j,k){var l=k.selector,m=k.clone||l,n=h.byClass(m,'fbTimelineCurationControl');if(n){g.addClass(n,'editControlsMenuOpen');var o=i.subscribe('close',function(p,q){if(q.selector==l){i.unsubscribe(o);g.removeClass.curry(n,'editControlsMenuOpen').defer();}});}});});
__d("TimelineNavigation",["Event","Arbiter","DOM","CSS","PageTransitions","Parent","TimelineController","TimelineURI","URI","$","createArrayFrom","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('DOM'),j=b('CSS'),k=b('PageTransitions'),l=b('Parent'),m=b('TimelineController'),n=b('TimelineURI'),o=b('URI'),p=b('$'),q=b('createArrayFrom'),r=b('ge'),s=4,t=110,u=20,v=119,w=328,x=10,y=3,z=false,aa=21,ba,ca,da,ea=[],fa=[],ga,ha=0,ia,ja=0,ka=0,la,ma=s,na=false,oa=false,pa=null,qa,ra=false,sa,ta,ua=false;function va(jb,kb,lb){if(!kb.firstChild){i.remove(kb);return;}fa.push(kb);ya(lb.recent);j.removeClass(l.byTag(kb,'li'),'empty');if(ga&&(ja>s||ka>0))j.removeClass(ga,'notready');xa();if(lb.async){cb();eb();}}function wa(jb,kb,lb){i.remove(l.byTag(kb,'li'));if(!lb.async){la++;}else{ja--;cb();eb();}xa();}function xa(){var jb=ga?0:aa;if(ja<=s){var kb=w+v*Math.max(0,s-ja)+jb;if(ia)ia.style.width=kb+'px';ma=ja;za();}}function ya(jb){if(jb){ka++;}else ja++;za();}function za(){if(!sa)return;var jb=Math.max(0,ja-s)+ka;if(ha&&ga){i.setContent(ha,jb===0?" ":jb);j.conditionClass(ga,'fbTimelineMoreButtonZero',jb===0);if(!na)j.conditionShow(ga,jb>0);}}function ab(){var jb=i.scry(p('fbTimelineNavTopRow'),'li.tile'),kb=0,lb=0,mb=Math.max(0,s-ma),nb=false;for(var ob=0;ob<jb.length;ob++){if(jb[ob]==ia||jb[ob]==ga)continue;nb=((kb+mb)%s===0);j.conditionClass(jb[ob],'leftMost',(kb!==0&&nb));if(!j.hasClass(jb[ob],'empty'))lb=kb;kb++;}nb=((lb+1+mb)%s===0);var pb=jb.length-1-mb;if(nb){if(na&&(lb+1+mb)/s<y){pb=Math.min(pb,lb+s);oa=true;}else pb=lb;}else{var qb=((lb+1+mb)%s);pb=lb+(s-qb);oa=false;}ob=0;for(ob=0;ob<=pb;ob++)if(jb[ob]&&(jb[ob]==ia||jb[ob]==ga)){pb++;}else jb[ob]&&j.hasClass(jb[ob],'empty')&&j.removeClass(jb[ob],'hidden_elem');}function bb(jb,kb,lb){var mb=i.scry(jb,'li.tile');if(!kb)kb=0;var nb=false;for(var ob=kb;ob<mb.length;ob++){nb=((ob-lb)%s===0);var pb=mb[ob];j.conditionClass(pb,'leftMost',nb);if(j.hasClass(pb,'empty'))j.removeClass(pb,'hidden_elem');}}function cb(){ab();var jb=r('fbTimelineNavSecondaryRow');jb&&bb(jb,0,0);}function db(){if(!ga)return;if(j.hasClass(ga,'notready'))return;j.toggleClass(ga,'fbTimelineMoreButtonOpen');var jb=r('fbRecentAppTitle');jb&&j.conditionClass(jb,'hidden_elem',ka===0);if(j.hasClass(ga,'fbTimelineMoreButtonOpen')){cb();}else za();eb();}function eb(){if(ga&&!j.hasClass(ga,'fbTimelineMoreButtonOpen')){ba.style.height='';j.removeClass(ba,'expanded');}else{var jb=ja+(s-ma),kb=((ka>0)?x:0)+t*(Math.ceil(ka/s))+t*(Math.ceil(jb/s))+t*(oa?1:0)+u;j.addClass(ba,'expanded');ba.style.height=kb+'px';}}function fb(jb){var kb=jb==n.TIMELINE_KEY||jb==n.WALL_KEY,lb=l.byClass(ba,'fbTimelineTopSectionBase'),mb=r('timeline_tour_toolbar');if(ga){j.removeClass(ga,'fbTimelineMoreButtonOpen');eb();}mb&&j.conditionShow(mb,kb);if(lb)j.conditionClass(lb,'collapsedHead',!kb);}function gb(event){if(ua)return true;if(!l.byTag(event.getTarget(),'a')){var jb=i.find(ia,'a.title');k.go(jb.href);}}function hb(){if(ga)(function(){ga.removeAttribute('ajaxify');ga.removeAttribute('rel');}).defer();pa&&pa.remove();}var ib={UPDATE_PAGE:'TimelineNavigation/updatePage',init:function(jb,kb,lb,mb){if(z)return;z=true;ba=jb;ga=kb;ca=o.getRequestURI();ia=i.scry(ba,'li.about')[0];fb(m.getCurrentKey());na=mb;h.inform(ib.UPDATE_PAGE);if(ga){ha=i.find(ga,'div.text');pa=g.listen(ga,'click',hb);}qa=p('fbTimelineNavigationLoadContainer');i.appendContent(p('content'),qa);if(ia)ta=g.listen(ia,'click',gb);ea.forEach(function(ob){if(!ob[2].remove){va.apply(this,ob);}else wa.apply(this,ob);});ea=[];var nb=l.byClass(jb,'fbTimelineSection');if(nb)i.scry(nb,'ul.uiButtonGroup').forEach(function(ob){q(ob.childNodes).forEach(function(pb){pb.childNodes.length||i.remove(pb);});if(ob.firstChild){j.addClass(ob.firstChild,'firstItem');}else i.remove(ob);});m.register(m.NAV,ib);},reset:function(){ta&&ta.remove();ta=null;sa&&sa.remove();sa=null;z=false;ba=null;da=null;fa=[];ga=null;ha=null;ia=null;ja=0;ka=0;la=0;ma=s;na=false;oa=false;qa=null;ra=false;ua=false;},initializeMorePager:function(){if(sa)return;if(ga)sa=g.listen(ga,'click',db);},registerNav:function(jb,kb,lb){z?(lb.remove?wa.apply(this,arguments):va.apply(this,arguments)):ea.push(arguments);},redraw:function(){cb();eb();},setEditMode:function(jb){ua=jb;}};e.exports=ib;});
__d("TimelinePageMostRecent",["CSS","DOMQuery","Parent","Style","TimelineCapsule","$"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOMQuery'),i=b('Parent'),j=b('Style'),k=b('TimelineCapsule'),l=b('$'),m={init:function(n,o){if(!g.shown(n)){g.show(n);var p=l(o);j.set(h.find(p,'div.sArea'),'height',(p.offsetHeight||0)+'px');k.balanceCapsule(i.byClass(l(n),'fbTimelineCapsule'));}}};e.exports=m;});
__d("legacy:tour",["Tour"],function(a,b,c,d){a.Tour=b('Tour');},3);
__d("TypeaheadPreventSubmitOnEnter",["Event","Keys","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Keys'),i=b('copyProperties');function j(k){this._typeahead=k;}j.prototype.enable=function(){var k=this._typeahead.getCore().getElement();this._listener=g.listen(k,'keypress',function(l){if(g.getKeyCode(l)==h.RETURN)l.kill();});};j.prototype.disable=function(){this._listener.remove();this._listener=null;};i(j.prototype,{_listener:null});e.exports=j;});
__d("TypeaheadShowResultsOnFocus",["Event","Keys","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Keys'),i=b('copyProperties');function j(k){this._typeahead=k;}j.prototype.enable=function(){var k=this._typeahead.getCore(),l=this._typeahead.getData();k.resetOnKeyup=false;this._subscription=this._typeahead.subscribe('bootstrap',function(m,n){this.firstFetch(n,k,l);}.bind(this));this._keyUpListener=g.listen(k.getElement(),'keyup',function(event){if(g.getKeyCode(event)==h.BACKSPACE||g.getKeyCode(event)==h.DELETE)this.respond(k,l);}.bind(this));this._focusListener=g.listen(k.getElement(),'focus',function(event){this.respond(k,l);}.bind(this));};j.prototype.disable=function(){this._typeahead.unsubscribe(this._subscription);this._subscription=null;this._keyUpListener.remove();this._keyUpListener=null;this._focusListener.remove();this._focusListener=null;};j.prototype.firstFetch=function(k,l,m){!k.bootstrapping&&this.respond(l,m);};j.prototype.respond=function(k,l){if(!k.getValue()){var m=this.getUidsFromData(l);k.setValue('');var n=l.buildUids(' ',m);l.respond('',n);}};j.prototype.getUidsFromData=function(k){var l=k.getAllEntries(),m=[];for(var n in l)m.push({uid:l[n].uid,index:l[n].index});m.sort(function(o,p){return o.index-p.index;});return m.map(function(o){return o.uid;});};i(j.prototype,{_subscription:null,_keyUpListener:null,_focusListener:null});e.exports=j;});